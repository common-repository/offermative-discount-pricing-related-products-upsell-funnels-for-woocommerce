!function(e){function t(t){for(var n,s,o=t[0],l=t[1],c=t[2],d=0,m=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&m.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);for(u&&u(t);m.length;)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},r={0:0},i=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window.webpackJsonp=window.webpackJsonp||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var u=l;i.push([5,1]),a()}([function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var n=a(1);function r(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?r(Object(a),!0).forEach((function(t){s(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t||{}}var t,a,r;return t=e,r=[{key:"currentCampaign",get:function(){return e._currentCampaign},set:function(t){e._currentCampaign=t}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}},{key:"fetchDetails",value:function(){try{Object.keys(e.currentCampaign).length>0&&OMFunctions.requestHandler({requestData:{cmd:"get_campaign_details",campaignId:e.currentCampaign.id||0,offer:JSON.stringify(e.currentCampaign.offer||{})},callback:function(t){if(Object.keys(e.currentCampaign).length>0){var a=t.analytics||{};e.currentCampaignParams=t.params||{},e.currentCampaign.recentOrders=a.recentOrders||[],e.currentCampaign.kpi.chartData=a.chartData||[],(e.currentCampaign.messages||[]).length>0&&e.currentCampaign.messages.map((function(e){e.kpi=a.messagesKPI[e.id]||{}}))}}})}catch(e){OMErrorHandler.log("In CampaignModel fetch:: ",e)}}},{key:"reset",value:function(){try{e.acceptedCampaignsIds=new Set,e.selectedMessageIds=[]}catch(e){OMErrorHandler.log("In CampaignModel reset:: ",e)}}},{key:"compileMessageContent",value:function(t,a){try{var n=a||e.currentCampaignParams;n.currencySymbol=omDashboardParams.currencySymbol,t.forEach((function(t){var a=t.messages||[];n.offer=t.offer||{};var r={content:{},messageParams:n,assetsURL:omDashboardParams.assetsURL};e.messageCompiledContent[t.id]={},a.forEach((function(a){r.content=a.content||{},e.messageCompiledContent[t.id][a.id]=OMFunctions.compileMessageContent(r)}))}))}catch(e){OMErrorHandler.log("In CampaignModel compileMessageContent:: ",e)}}},{key:"generate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{e.flags.generatingCampaigns=1,n.a.data.campaigns,e.reset(),OMFunctions.requestHandler({requestData:{cmd:"generate_campaigns",restrictions:JSON.stringify(t)},callback:function(t){"Success"===t.ACK?(e.generatedCampaigns=t.generatedCampaigns.campaigns||[],e.generatedCampaigns.length>0&&(e.currentCampaignParams=t.params||{},e.compileMessageContent(e.generatedCampaigns),e.generatedCampaigns=n.a.prepareCampaignsData(e.generatedCampaigns),e.currentIndex=0,e.setCurrentCampaign(e.generatedCampaigns[e.currentIndex]),e.flags.generatingCampaigns=0,e.flags.enableCampaignGeneration=!1)):(e.flags.generatingCampaigns=0,e.flags.enableCampaignGeneration=!0,e.flags.showNotification=1,e.notification.message="Failed. Retry after some time.",e.notification.status="failed")}})}catch(e){OMErrorHandler.log("In CampaignModel generate:: ",e)}}},{key:"encodeMessage",value:function(e){try{return e&&(Object.keys(e.content).map((function(t){e.content[t]=OMFunctions.encodeHtmlString(e.content[t])})),e.template=OMFunctions.encodeHtmlString(e.template)),e}catch(e){OMErrorHandler.log("In CampaignModel encodeMessage:: ",e)}}},{key:"save",value:function(){try{if(e.generatedCampaigns.length>0){var t=e.generatedCampaigns.filter((function(t,a){var n=t.id||0;if(e.acceptedCampaignsIds.has(n))return t.messages.map((function(t){t=e.encodeMessage(t)})),t.enabled=1,t}));t.length>0?OMFunctions.requestHandler({requestData:{cmd:"insert_campaigns",campaigns:JSON.stringify({campaigns:t})},callback:function(t){if("Success"==t.ACK){e.generatedCampaigns=[],e.currentCampaign={},e.currentCampaignOffer={},e.currentIndex=0,e.flags.currentActiveCount+=e.acceptedCampaignsIds.size,e.acceptedCampaignsIds=new Set;var a=t.campaigns||{},r=a.campaigns||[];e.currentCampaignParams=a.params||{},e.compileMessageContent(r),n.a.data.campaigns=n.a.prepareCampaignsData(r),n.a.data.filteredCampaigns=n.a.data.campaigns,e.flags.showNotification=1,e.notification.message="Campaigns generated successfully.",e.notification.status="success"}}}):(e.generatedCampaigns=[],e.currentCampaign={},e.currentCampaignOffer={},e.currentIndex=0,e.flags.showNotification=1,e.notification.message="No campaigns generated.",e.notification.status="warning"),e.flags.enableCampaignGeneration=!0}}catch(e){OMErrorHandler.log("In CampaignModel save:: ",e)}}},{key:"enable",value:function(t,a){try{OMFunctions.requestHandler({requestData:{cmd:"set_enabled",campaignIds:JSON.stringify(t),enable:a},callback:function(t){if("Success"==t.ACK){var r=t.campaigns||{},i=r.campaigns||[];e.flags.currentActiveCount=1===a?++e.flags.currentActiveCount:--e.flags.currentActiveCount,e.currentCampaignParams=r.params||{},e.compileMessageContent(i),n.a.data.selectedCampaignIds=[],n.a.data.campaigns=n.a.prepareCampaignsData(i),n.a.data.filteredCampaigns=n.a.data.campaigns,e.flags.currentPage=1,e.flags.showNotification=1,e.notification.message=1===a?"Campaigns resumed successfully":"Campaigns paused successfully",e.notification.status="success",e.flags.currentStatusFilter="all"}else e.flags.showNotification=1,e.notification.message=1===a?"Error resuming campaigns":"Error pausing campaigns",e.notification.status="failed"}})}catch(e){OMErrorHandler.log("In CampaignModel enable:: ",e)}}},{key:"delete",value:function(t){try{Array.isArray(t)||(t=[t]),OMFunctions.requestHandler({requestData:{cmd:"delete_campaigns",campaignIds:JSON.stringify(t)},callback:function(a){if("Success"==a.ACK){e.flags.currentActiveCount-=t.length,e.currentCampaign={},e.currentCampaignOffer={},e.currentIndex=0;var r=a.campaigns||{},i=r.campaigns||[];e.currentCampaignParams=r.params||{},e.compileMessageContent(i),n.a.data.selectedCampaignIds=[],n.a.data.campaigns=n.a.prepareCampaignsData(i),n.a.data.filteredCampaigns=n.a.data.campaigns,e.flags.currentPage=1,e.flags.showNotification=1,e.notification.message="Campaign deleted successfully",e.notification.status="success",e.flags.currentStatusFilter="all"}else e.flags.showNotification=1,e.notification.message="Error while deleting campaigns",e.notification.status="failed"}})}catch(e){OMErrorHandler.log("In CampaignModel delete:: ",e)}}},{key:"extend",value:function(t){try{OMFunctions.requestHandler({requestData:{cmd:"extend_campaigns",campaignIds:JSON.stringify(t),days:14},callback:function(t){if("Success"==t.ACK){var a=t.campaigns||{},r=a.campaigns||[];e.currentCampaignParams=a.params||{},e.compileMessageContent(r),n.a.data.selectedCampaignIds=[],n.a.data.campaigns=n.a.prepareCampaignsData(r),n.a.data.filteredCampaigns=n.a.data.campaigns,e.flags.currentPage=1,e.flags.showNotification=1,e.notification.message="Campaigns extended by 14 days.",e.notification.status="success",e.flags.currentStatusFilter="all"}else e.flags.showNotification=1,e.notification.message="Campaigns not extended.",e.notification.status="failed"}})}catch(e){OMErrorHandler.log("In CampaignModel extend:: ",e)}}},{key:"next",value:function(){try{if(e.currentIndex+1<e.generatedCampaigns.length){if(e.flags.campaignEdited){var t=e.editedRules.conditions||{},a=e.editedRules.rules||{};e.flags.campaignEdited&&(Object.keys(t).length>0||Object.keys(a).length>0||e.deletedRuleKeys.size>0)&&e.refreshCurrentCampaignRules()}e.currentIndex++,e.selectedMessageIds=[],e.setCurrentCampaign(e.generatedCampaigns[e.currentIndex])}else alert('This is the last campaign we generated this time. You may "Save & Finish" this and then generate again if you want.')}catch(e){OMErrorHandler.log("In CampaignModel next:: ",e)}}},{key:"previous",value:function(){try{if(0!=e.currentIndex){if(e.flags.campaignEdited){var t=e.editedRules.conditions||{},a=e.editedRules.rules||{};e.flags.campaignEdited&&(Object.keys(t).length>0||Object.keys(a).length>0||e.deletedRuleKeys.size>0)&&e.refreshCurrentCampaignRules()}e.currentIndex--,e.selectedMessageIds=[],e.setCurrentCampaign(e.generatedCampaigns[e.currentIndex])}else alert("You've reached the first generated campaign!")}catch(e){OMErrorHandler.log("In CampaignModel previous:: ",e)}}},{key:"deleteMessageIndex",value:function(t){try{if(e.generatedCampaigns.length>0)e.currentCampaign.messages.splice(t,1);else{var a=e.currentCampaign.messages[t].id;e.selectedMessageIds=e.selectedMessageIds.filter((function(e){return e!==a})),e.currentDeletedMessageIds.add(a)}e.flags.campaignEdited=!0}catch(e){OMErrorHandler.log("In CampaignModel deleteMessageIndex:: ",e)}}},{key:"refreshCurrentCampaignOffer",value:function(){try{if(Object.keys(e.editedOffer).length>0){var t=e.currentCampaign.offer||{};Object.keys(e.editedOffer).map((function(a){if(t[a])t[a]=e.editedOffer[a];else switch(a){case"productId":t.product&&(t.product.id=e.editedOffer[a]);break;case"pages":var n=(((t.rules||[])[0].rules||[])[0].rules||[]).find((function(e){return"page"===e.type}))||{};n.value=e.editedOffer[a],Array.isArray(e.editedOffer[a])&&(n.operator="neq"==n.operator||"nin"==n.operator?"nin":"in")}}))}}catch(e){OMErrorHandler.log("In CampaignModel refreshCurrentCampaignOffer:: ",e)}}},{key:"refreshCurrentCampaignRules",value:function(){try{e.currentCampaignRuleGroups=e.mapRuleGroups(e.currentCampaignRuleGroups,e.updateRule)}catch(e){OMErrorHandler.log("In CampaignModel refreshCurrentCampaignRules:: ",e)}}},{key:"update",value:function(){try{if(e.selectedMessageIds.length>0||e.flags.campaignEdited){if(e.currentCampaign.messages=e.currentCampaign.messages.filter((function(t){return!e.currentDeletedMessageIds.has(t.id)})),e.currentCampaign.messages)for(var t=0;t<e.currentCampaign.messages.length;t++)e.currentCampaign.messages[t].content=e.selectedMessageIds.includes(e.currentCampaign.messages[t].id)?e.defaultMessageContent:e.currentCampaign.messages[t].content;e.currentCampaign.messages=e.currentCampaign.messages.map((function(t){return e.encodeMessage(t)})),Object.keys(e.editedOffer).length>0&&e.refreshCurrentCampaignOffer();var a=e.editedRules.conditions||{},r=e.editedRules.rules||{};e.flags.campaignEdited&&(Object.keys(a).length>0||Object.keys(r).length>0||e.deletedRuleKeys.size>0)&&(e.refreshCurrentCampaignRules(),e.currentCampaignRuleGroups=e.mapRuleGroups(e.currentCampaignRuleGroups,e.removeKey)),e.currentCampaign.title=e.currentCampaignTitle||"",OMFunctions.requestHandler({requestData:{cmd:"update_campaign",campaignId:e.currentCampaign.id||0,campaignParams:JSON.stringify({startAt:e.currentCampaign.startAt,endAt:e.currentCampaign.endAt,title:e.currentCampaign.title,offer:e.currentCampaign.offer||{},messages:e.currentCampaign.messages})},callback:function(t){if("Success"===t.ACK){var a=e.currentCampaign.id||0;e.compileMessageContent([e.currentCampaign]);for(var r=0;r<n.a.data.campaigns.length;r++)if(n.a.data.campaigns[r].id==e.currentCampaign.id){n.a.data.campaigns[r]=e.currentCampaign;break}n.a.data.filteredCampaigns=n.a.data.campaigns,e.setCurrentCampaign(e.currentCampaign);for(var i=0;i<n.a.data.filteredCampaigns.length;i++)if(a==n.a.data.filteredCampaigns[i].id){var s=e.currentCampaign.messages;if(n.a.data.filteredCampaigns[i].messages=s,s.length>0&&!n.a.data.filteredCampaigns[i].title){var o=e.messageCompiledContent[a][s[0].id]||{};n.a.data.filteredCampaigns[i].title=o.hasOwnProperty("heading")?decodeURIComponent(o.heading({})):""}}e.currentCampaign={},e.currentCampaignOffer={},e.selectedMessageIds=[],e.flags.campaignEdited=!1,e.flags.showNotification=1,e.notification.message="Campaigns updated.",e.notification.status="success"}}})}else alert("Nothing to update. Please make your changes first.")}catch(e){OMErrorHandler.log("In CampaignModel update:: ",e)}}},{key:"updateMessageContent",value:function(){try{if(0==e.generatedCampaigns.length){var t=e.currentCampaign.messages||[],a={id:e.currentCampaign.id,offer:i({},e.currentCampaign.offer),messages:[]};t.map((function(t){a.messages.push({id:t.id,content:e.selectedMessageIds.includes(t.id)?i({},e.defaultMessageContent):i({},t.content)})})),e.compileMessageContent([a]),e.flags.campaignEdited=!0}else{var n=e.currentCampaign.messages||[];if(n.forEach((function(t,a){n[a].content=e.selectedMessageIds.includes(t.id)?e.defaultMessageContent:t.content})),e.compileMessageContent([e.currentCampaign]),n.length>0&&!e.currentCampaign.title){var r=e.messageCompiledContent[e.currentCampaign.id][n[0].id]||{};e.currentCampaign.title=r.hasOwnProperty("heading")?decodeURIComponent(r.heading({})):""}e.generatedCampaigns[e.currentIndex]=e.currentCampaign,e.setCurrentCampaign(e.currentCampaign)}}catch(e){OMErrorHandler.log("In CampaignModel updateMessageContent:: ",e)}}},{key:"handleMessageSelection",value:function(t,a){try{if("all"==t)e.selectedMessageIds=a?e.currentCampaign.messages.map((function(e){return e.id})):[];else{var n=e.selectedMessageIds.indexOf(t);-1<n&&!a?e.selectedMessageIds.splice(n,1):-1==n&&a&&e.selectedMessageIds.push(t)}}catch(e){OMErrorHandler.log("In CampaignModel handleMessageSelection:: ",e)}}},{key:"setCurrentCampaign",value:function(t){try{e.currentCampaign=t;var a=t.messages||[],n=[];e.defaultMessageContent=a.length>0?i({},a[0].content):{},e.messageContentPlaceholders=[],e.currentDeletedMessageIds=new Set,e.currentCampaignRuleGroups=[],e.editedOffer={},e.editedRules={conditions:{},rules:{}},e.addedRuleKeys=new Set,e.deletedRuleKeys=new Set;var r=e.currentCampaign.offer||{};e.currentCampaignRuleGroups=r.rules||[];var s=((e.currentCampaignRuleGroups[0].rules||[])[0].rules||[]).find((function(e){return"page"===e.type}))||{},o=r.product||{};e.currentCampaignOffer={discount:r.discount||{},productId:o.id||0,pages:s.value},e.currentCampaignRuleGroups=e.mapRuleGroups(e.currentCampaignRuleGroups,e.addKey),a.map((function(t){n.push(t.id);var a=t.template||"";if(a){var r=(a=OMFunctions.decodeHtmlString(a)).match(/{{content(.*?)[}]?}}/g);r&&r.map((function(t){var a=t.substring(t.indexOf(".")+1,t.indexOf("}}"));e.messageContentPlaceholders.includes(a)||e.messageContentPlaceholders.push(a)}))}})),0==e.selectedMessageIds.length&&(e.selectedMessageIds=n),0==e.generatedCampaigns.length&&e.compileMessageContent([e.currentCampaign]);var l=e.messageCompiledContent[e.currentCampaign.id][a[0].id]||{},c=l.hasOwnProperty("heading")?decodeURIComponent(l.heading({})):"";e.currentCampaignTitle=t.title||c}catch(e){OMErrorHandler.log("In CampaignModel setCurrentCampaign:: ",e)}}},{key:"load",value:function(t){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{t&&t.preventDefault(),a?++e.flags.currentPage:e.flags.currentPage=1,OMFunctions.requestHandler({requestData:{cmd:"get_campaign_list",page:e.flags.currentPage,filter:e.flags.currentStatusFilter},callback:function(t){var a=t.campaigns||[];a&&a.length>0?(e.currentCampaignParams=t.params||{},e.compileMessageContent(a),e.flags.currentPage>1?n.a.data.campaigns=n.a.data.campaigns.concat(a):(n.a.data.totalCampaignCount=e.currentCampaignParams.totalCampaigns||0,n.a.data.campaigns=a),n.a.data.campaigns.length==n.a.data.totalCampaignCount?e.flags.loadMore=!1:e.flags.loadMore=!0,n.a.data.campaigns=n.a.prepareCampaignsData(n.a.data.campaigns),n.a.data.filteredCampaigns=n.a.data.campaigns):(1==e.flags.currentPage&&(n.a.data.campaigns=[],n.a.data.filteredCampaigns=n.a.data.campaigns,n.a.data.totalCampaignCount=0),e.flags.loadMore=!1)}})}catch(t){OMErrorHandler.log("In CampaignModel setCurrentCampaign:: ",t)}}},{key:"deleteRule",value:function(t,a){try{var n=t.key||"";return""==n||(a||(a=e.addedRuleKeys||new Set),a.has(n)&&(t.deleted=1)),t}catch(e){OMErrorHandler.log("In CampaignModel deleteRule:: ",e)}}},{key:"updateRule",value:function(t){try{var a=t.key||"";if(""==a)return t;e.deleteRule(t,e.deletedRuleKeys);var n=e.editedRules.conditions||{},r=e.editedRules.rules||{};return n.hasOwnProperty(a)&&t.condition&&(t.condition=n[a]),r.hasOwnProperty(a)&&r[a].type&&(t=i({},r[a])),t}catch(e){OMErrorHandler.log("In CampaignModel updateRule:: ",e)}}},{key:"removeKey",value:function(e){try{return e.key&&delete e.key,e}catch(e){OMErrorHandler.log("In CampaignModel removeKey:: ",e)}}},{key:"addKey",value:function(e){try{return e&&(e.key=OMFunctions.generateKey()),e}catch(e){OMErrorHandler.log("In CampaignModel addKey:: ",e)}}},{key:"mapRuleGroups",value:function(t,a){try{for(var n=0;n<t.length;n++)if(t[n]=a(t[n]),t[n].hasOwnProperty("deleted"))t.splice(n,1);else if(Array.isArray(t[n].rules))for(var r=t[n].rules,i=0;i<r.length;i++)r[i]=a(r[i]),r[i].hasOwnProperty("deleted")?r.splice(i,1):r[i].rules&&(r[i].rules=e.mapRuleGroups(r[i].rules,a));return t}catch(e){OMErrorHandler.log("In CampaignModel mapRuleGroups:: ",e)}}},{key:"addRule",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;try{var a=i({},e.data.default.rule)||{};if(a.key=OMFunctions.generateKey(),t>=0){var n=e.currentCampaign.offer.rules[0].rules[t]||[];n&&n.rules.push(a)}else{var r=i({},e.data.default.ruleGroup)||{};r.rules=[a],r.key=OMFunctions.generateKey(),e.addedRuleKeys.add(r.key),e.currentCampaign.offer.rules[0].rules.push(r)}e.addedRuleKeys.add(a.key),e.flags.campaignEdited=!0}catch(e){OMErrorHandler.log("In CampaignModel addRule:: ",e)}}},{key:"canAddMoreCampaigns",value:function(){try{return e.generatedCampaigns.length>0?e.acceptedCampaignsIds.size:n.a.data.selectedCampaignIds.length,!0}catch(e){OMErrorHandler.log("In CampaignModel canAddMoreCampaigns:: ",e)}}}],(a=null)&&o(t.prototype,a),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();l.currentCampaign={},l.currentCampaignOffer={},l.currentCampaignParams={},l.currentCampaignRuleGroups=[],l.defaultMessageContent={},l.currentCampaignTitle="",l.selectedMessageIds=[],l.currentIndex=0,l.acceptedCampaignsIds=new Set,l.currentDeletedMessageIds=new Set,l.generatedCampaigns=[],l.messageCompiledContent={},l.messageContentPlaceholders=[],l.editedOffer={},l.editedRules={conditions:{},rules:{}},l.addedRuleKeys=new Set,l.deletedRuleKeys=new Set,l.availableRules={},l.availableOfferTypes={},l.selectedOfferTypes=new Set,l.notification={message:"Successfully completed",status:"bg-green-400"},l.modal={},l.flags={currentPage:1,loadMore:!0,currentStatusFilter:"all",messageDeleted:!1,ruleDeleted:!1,messageEdited:!1,showNotification:0,generatingCampaigns:0,enableCampaignGeneration:!0,showGenerateCampaignsDialog:!1,campaignEdited:!1,maxActiveCount:parseInt(omDashboardParams.maxActiveCampaignsCount||0),currentActiveCount:parseInt(omDashboardParams.currentActiveCampaignsCount||0)};var c={type:"",operator:"",value:""};l.data={ruleGroups:{},default:{ruleGroup:{condition:"AND",rules:[c]},rule:c},fields:{},possibleOperators:{}}},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{e.data={kpi:{},campaigns:[],filteredCampaigns:[],recentOrders:[],selectedCampaignIds:[],settings:{maxDiscount:{percent:"",amount:""},excludedIds:{product:[],category:[]},messageCopyParams:{audience:"",desires:[]},adminDetails:{name:"",email:""}}},this.params=t||{},e.flags={showSettings:!1}}catch(e){OMErrorHandler.log("In DashboardModel construct:: ",e)}}var t,a,i;return t=e,i=[{key:"data",get:function(){return e._data},set:function(t){e._data=t}},{key:"flags",get:function(){return e._flags},set:function(t){e._flags=t}},{key:"fetch",value:function(){try{OMFunctions.requestHandler({requestData:{cmd:"dashboard_data",page:1},callback:function(t){t&&e.extractData(t)}})}catch(e){OMErrorHandler.log("In DashboardModel fetch:: ",e)}}},{key:"extractData",value:function(t){try{var a=t.campaignsList||{};e.data.kpi=t.kpi||{},e.data.campaigns=a.campaigns||[],e.data.recentOrders=t.recentOrders||[],e.data.settings=Object.keys(t.settings).length>0?t.settings:e.data.settings,n.a.currentCampaignParams=a.params||{},n.a.compileMessageContent(e.data.campaigns),e.data.totalCampaignCount=n.a.currentCampaignParams.totalCampaigns||0,e.data.campaigns.length>0?(e.data.campaigns=e.prepareCampaignsData(e.data.campaigns),e.data.filteredCampaigns=e.data.campaigns):n.a.flags.loadMore=!1,t.campaignRules&&(n.a.availableRules=t.campaignRules||{}),t.campaignOfferTypes&&(n.a.availableOfferTypes=t.campaignOfferTypes||{})}catch(e){OMErrorHandler.log("In DashboardModel extractData:: ",e)}}},{key:"prepareCampaignsData",value:function(e){try{for(var t=0;t<e.length;t++){e[t].earnings=e[t].hasOwnProperty("kpi")?e[t].kpi.earnings:0;var a=e[t].hasOwnProperty("offer")?e[t].offer:{},r=a.subType||"",i=a.type||"";if(e[t].offerType=""!=r?r:i,""==(e[t].title||"")){var s=e[t].hasOwnProperty("messages")?e[t].messages:[];if(s.length>0){var o=n.a.messageCompiledContent[e[t].id][s[0].id]||{};e[t].title=o.hasOwnProperty("heading")?decodeURIComponent(o.heading({})):""}}}return e}catch(e){OMErrorHandler.log("In DashboardModel prepareCampaignsData:: ",e)}}},{key:"filterCampaigns",value:function(e,t){try{n.a.flags.currentStatusFilter=t,n.a.load(e,!1)}catch(e){OMErrorHandler.log("In DashboardModel filterCampaigns:: ",e)}}},{key:"handleRowSelection",value:function(t,a){try{var n=e.data||{},r=n.selectedCampaignIds.indexOf(t);-1<r&&!a?n.selectedCampaignIds.splice(r,1):-1==r&&a&&n.selectedCampaignIds.push(t)}catch(e){OMErrorHandler.log("In DashboardModel handleRowSelection:: ",e)}}},{key:"updateSettings",value:function(t,a){try{Object.keys(t).length>0&&OMFunctions.requestHandler({requestData:{cmd:"update_settings",settings:JSON.stringify(t)},callback:function(n){if("Success"==n.ACK){var r=n.settings||{};omDashboardParams.isSettingsEmpty=Object.keys(r).length>0?"0":"1",e.data.settings=n.settings||t,a?e.flags.isSettingsAccountTab=!0:e.flags.showSettings=!1,m.route.set("/dashboard")}}})}catch(e){OMErrorHandler.log("In DashboardModel updateSettings:: ",e)}}},{key:"verifyCreateAccount",value:function(t){try{Object.keys(t).length>0&&OMFunctions.requestHandler({requestData:{cmd:"verify_create_account",isNewUser:e.flags.isNewUser||!1,accountDetails:JSON.stringify(t)},callback:function(t){"Success"==t.ACK?(omDashboardParams.accessToken=t.token||"",e.flags.isNewUser=!1,e.flags.isSettingsAccountTab=!1,e.flags.showSettings=!1,t.isSettingsEmpty?m.route.set("/settings"):m.route.set("/dashboard")):(n.a.flags.showNotification=1,n.a.notification.message=t.message||"Failed. Retry after some time.",n.a.notification.status="failed",e.flags.isSettingsAccountTab=!0,t.user_exists&&(e.flags.isNewUser=!1))}})}catch(e){OMErrorHandler.log("In DashboardModel verifyCreateAccount:: ",e)}}}],(a=null)&&r(t.prototype,a),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();i.data={kpi:{},campaigns:[],filteredCampaigns:[],recentOrders:[],selectedCampaignIds:[],settings:{maxDiscount:{percent:"",amount:""},excludedIds:{product:[],category:[]},messageCopyParams:{audience:"",desires:[]},adminDetails:{name:"",email:""}}},i.flags={showSettings:!1,isOnboarding:!1,isSettingsAccountTab:!1,isNewUser:!1}},function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(1),r=a(0),i=a(3);function s(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{this.initialize(),this.settings={maxDiscount:{percent:this.savedSettings.maxDiscount.percent||"30",amount:this.savedSettings.maxDiscount.amount||"50"},excludedIds:{product:this.savedSettings.excludedIds.product||{},category:this.savedSettings.excludedIds.category||{}},messageCopyParams:{audience:this.savedSettings.messageCopyParams.audience||"",desires:[this.savedSettings.messageCopyParams.desires[0]||"",this.savedSettings.messageCopyParams.desires[1]||""],language:this.savedSettings.messageCopyParams.language||"en"},adminDetails:{name:this.savedSettings.adminDetails.name||omDashboardParams.defaultAdminDetails.name,email:this.savedSettings.adminDetails.email||omDashboardParams.defaultAdminDetails.email}},this.availableLanguages={nl:"Dutch",en:"English",fr:"French",de:"German",iw:"Hebrew",it:"Italian",ja:"Japanese",pl:"Polish","pt-BR":"Portuguese (Brazil)","pt-PT":"Portuguese (Portugal)",ru:"Russian",es:"Spanish",tr:"Turkish"},this.account={name:"",email:"",password:""}}catch(e){OMErrorHandler.log("In Settings constructor:: ",e)}}var t,a,o;return t=e,o=[{key:"initializeSelect2",value:function(){try{jQuery(":input.sa-om-category-search").filter(":not(.enhanced)").each((function(){var e=jQuery.extend({dropdownParent:jQuery("#om-settings-panel"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),minimumInputLength:jQuery(this).data("minimum_input_length")?jQuery(this).data("minimum_input_length"):3,escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"woocommerce_json_search_categories",security:wc_enhanced_select_params.search_categories_nonce}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a.name})})),{results:t}},cache:!0}},OMFunctions.getEnhancedSelectFormatString());jQuery(this).selectWoo(e).addClass("enhanced")})),jQuery(":input.sa-om-product-search").filter(":not(.enhanced)").each((function(){var e={dropdownParent:jQuery("#om-settings-panel"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),minimumInputLength:jQuery(this).data("minimum_input_length")?jQuery(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:jQuery(this).data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce,exclude:jQuery(this).data("exclude"),exclude_type:jQuery(this).data("exclude_type"),include:jQuery(this).data("include"),limit:jQuery(this).data("limit"),display_stock:jQuery(this).data("display_stock")}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0}};if(e=jQuery.extend(e,OMFunctions.getEnhancedSelectFormatString()),jQuery(this).selectWoo(e).addClass("enhanced"),jQuery(this).data("sortable")){var t=jQuery(this),a=jQuery(this).next(".select2-container").find("ul.select2-selection__rendered");a.sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){jQuery(a.find(".select2-selection__choice").get().reverse()).each((function(){var e=jQuery(this).data("data").id,a=t.find('option[value="'+e+'"]')[0];t.prepend(a)}))}})}else jQuery(this).prop("multiple")&&jQuery(this).on("change",(function(){var e=jQuery(this).children();e.sort((function(e,t){var a=e.text.toLowerCase(),n=t.text.toLowerCase();return a>n?1:a<n?-1:0})),jQuery(this).html(e)}))})),jQuery(":input.sa-om-lang-search").each((function(e){var t=jQuery.extend({dropdownParent:jQuery("#om-settings-panel"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),escapeMarkup:function(e){return e}},OMFunctions.getEnhancedSelectFormatString());jQuery(this).selectWoo(t)}))}catch(e){OMErrorHandler.log("In Settings initialize Select2:: ",e)}}}],(a=[{key:"initialize",value:function(){try{this.savedSettings=n.a.data.settings||{}}catch(e){OMErrorHandler.log("In Settings initialize:: ",e)}}},{key:"onupdate",value:function(){this.isAccountTab||(jQuery("#om-settings-panel").trigger("wc-enhanced-select-init"),e.initializeSelect2())}},{key:"oncreate",value:function(){try{jQuery("#om-settings-panel").trigger("wc-enhanced-select-init"),"settings"==m.route.get()?jQuery(document).ready((function(){e.initializeSelect2()})):e.initializeSelect2()}catch(e){OMErrorHandler.log("In Settings oncreate:: ",e)}}},{key:"updateSettings",value:function(e){try{this.settings.excludedIds={product:jQuery('[name="product_ids[]"]').val(),category:jQuery('[name="category_ids[]"]').val()},this.settings.messageCopyParams.language=jQuery('[name="sa-om-lang"]').val(),n.a.updateSettings(this.settings,e)}catch(e){OMErrorHandler.log("In Settings update:: ",e)}}},{key:"verifyCreateAccount",value:function(){this.validationFailed=0,""==document.getElementById("password").value&&(r.a.flags.showNotification=1,r.a.notification.message=_x("Password cannot be blank","settings panel - failed notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),r.a.notification.status="failed",this.validationFailed=1),!document.getElementById("terms").checked&&this.isNewUser&&(r.a.flags.showNotification=1,r.a.notification.message=_x("Please accept the terms of use & privacy policy","settings panel - failed notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),r.a.notification.status="failed",this.validationFailed=1),0==this.validationFailed&&n.a.verifyCreateAccount(this.account)}},{key:"view",value:function(e){var t=this;try{return this.initialize(),e.attrs.isSettingsAccountTab&&(n.a.flags.isSettingsAccountTab=e.attrs.isSettingsAccountTab),this.isAccountTab=n.a.flags.isSettingsAccountTab||!1,this.isNewUser=n.a.flags.isNewUser||!1,this.isSettingsEmpty=omDashboardParams.isSettingsEmpty||"1",m("[",null,m("div",{"x-show":"settings",class:"fixed inset-0 overflow-hidden",style:"z-index: 120000"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75"}),m("div",{id:"om-settings-panel",class:"absolute inset-y-0 right-0 pl-20 w-screen max-w-lg"},m("div",{class:"h-full flex flex-col bg-gray-50 shadow-xl overflow-y-scroll"},m("nav",{class:"pl-8 pr-4 py-2 sticky top-0 bg-gray-100 z-top"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},m("h2",{class:"text-xl font-medium leading-7 text-gray-700"},this.onboarding?_x("Offermative","settings panel - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Settings","settings panel - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"flex items-center ml-4 lg:ml-2"},this.isAccountTab?"":m("span",{class:"ml-4 rounded-md"},m("button",{type:"button",onclick:function(){t.updateSettings(t.onboarding)},class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo"},this.onboarding?_x("Save & Next","settings panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Save","settings panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("button",{onclick:function(){n.a.flags.showSettings=!1},class:(this.onboarding||this.isAccountTab?"hidden":"")+" p-1 ml-4 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100"},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M6 18L18 6M6 6l12 12"}))))))),this.isAccountTab?m("[",null,m("section",{class:"bg-white shadow","x-show":"onboarding"},m("div",{class:"px-8 py-4 mx-auto space-y-4"},m("div",{class:"space-y-3 text-sm text-gray-600"},m("p",null,_x("You need an Offermative account to use this plugin on your site.","settings panel - onboarding description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("p",null,_x("Login or signup for a paid plan.","settings panel - onboarding description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),m("section",{class:"h-full px-8 pt-4 pb-8 space-y-4 text-gray-600"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},sprintf(_x("%s your account","settings panel - account heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.isNewUser?_x("Create","settings panel - account heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Manage","settings panel - account heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("div",{class:"space-y-4"},m("div",{class:""},m("input",{id:"name",class:(this.isNewUser?"":"hidden")+" block w-full form-input sm:text-sm sm:leading-5",placeholder:omDashboardParams.defaultAdminDetails.name||_x("Name","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.account.name||"",onfocusout:function(e){t.account.name=e.target.value}})),m("div",null,m("input",{id:"email",class:"block w-full form-input sm:text-sm sm:leading-5",placeholder:_x("email","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.account.email||"",onfocusout:function(e){t.account.email=e.target.value}})),m("div",null,m("input",{type:"password",id:"password",class:"block w-full form-input sm:text-sm sm:leading-5",placeholder:_x("Password","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),onfocusout:function(e){t.account.password=e.target.value}})),m("div",null,m("span",{class:(this.isNewUser?"":"hidden")+" relative inline-block space-x-1"},m("input",{type:"checkbox",id:"terms",name:"terms",class:"w-4 h-4 transition duration-150 ease-in-out form-checkbox checked:bg-green-600"}),m("label",{for:"terms",class:"space-x-1"},m("span",null,_x("I agree to the","settings panel - terms and privacy-policy link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("a",{href:"https://www.offermative.com/terms-and-conditions/",target:"_blank",class:"underline focus:outline-none"},_x("terms of use","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("span",null,_x("and","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("a",{href:"https://www.offermative.com/privacy-policy/",target:"_blank",class:"underline focus:outline-none"},_x("privacy policy","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),m("div",{class:"space-y-4"},m("div",{class:"rounded-md"},m("button",{type:"button",onclick:function(){t.verifyCreateAccount()},class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo"},this.isNewUser?_x("Sign up","settings panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Log in & Get started","settings panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("div",null,m("span",null,sprintf(_x("%s have an account?","settings panel - account description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.isNewUser?_x("Already","settings panel - account description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Don't","settings panel - account description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))+" "),m("a",{href:this.isNewUser?"#":"https://www.offermative.com/pricing/",class:"underline focus:outline-none",target:"_blank",onclick:function(e){t.isNewUser&&(e.preventDefault(),n.a.flags.isNewUser=!t.isNewUser)}},this.isNewUser?_x("Login here","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Sign up for a plan","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))))):m("[",null,m("section",{class:"bg-white shadow","x-show":"onboarding"},m("div",{class:"px-8 py-4 mx-auto space-y-4"},m("h3",{class:"text-lg font-medium leading-6 text-gray-900"},_x("1-minute setup, never ending sales!","settings panel - onboarding heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:"space-y-3 text-sm text-gray-600"},m("p",null,_x("Offermative automatically generates offers, shows them to your customers and tracks performance.","settings panel - onboarding description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("p",null,_x("Let's set up the basics...","settings panel - onboarding description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),m("section",{class:"px-8 pt-4 pb-8 space-y-4 text-gray-600 border-b"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},_x("Discount and restrictions","settings panel - onboarding heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",null,_x("I can give maximum","settings panel - onboarding discount - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")+" ",m("div",{class:"relative inline-block rounded-md shadow-sm"},m("input",{id:"discount_percent",class:"block w-20 form-input pr-7 sm:text-sm sm:leading-5",placeholder:"30",value:this.settings.maxDiscount.percent||"30",onfocusout:function(e){t.settings.maxDiscount.percent=e.target.value}}),m("div",{class:"absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none"},m("span",{class:"text-gray-500 sm:text-sm sm:leading-5"},"%")))," ",_x("discount.","settings panel - onboarding discount - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",null,_x("But it should not exceed","settings panel - onboarding discount - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")+" ",m("div",{class:"relative inline-block rounded-md shadow-sm"},m("input",{id:"discount_amount",class:"block w-20 form-input pl-7 sm:text-sm sm:leading-5",placeholder:"50",value:this.settings.maxDiscount.amount||"50",onfocusout:function(e){t.settings.maxDiscount.amount=e.target.value}}),m("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m("span",{class:"text-gray-500 sm:text-sm sm:leading-5"},omDashboardParams.currencySymbol)))),m("div",null,_x("Never discount these products:","settings panel - onboarding discount - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")+" ",m("div",{class:"relative rounded-md shadow-sm"},m("select",{class:"sa-om-product-search block w-full mt-1 form-input sm:text-sm sm:leading-5",multiple:!0,name:"product_ids[]","data-placeholder":_x("Search for a product…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),"data-action":"om_json_search_products_only_and_not_variations",tabindex:"-1","aria-hidden":"true"},this.settings.excludedIds.product?Object.entries(this.settings.excludedIds.product).map((function(e){return m("[",null,m("option",{value:e[0],selected:"selected"},e[1]))})):""))),m("div",null,_x("Never discount products in these categories:","settings panel - onboarding discount - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")+" ",m("div",{class:"relative rounded-md shadow-sm"},m("select",{class:"sa-om-category-search block w-full mt-1 form-input sm:text-sm sm:leading-5",multiple:!0,name:"category_ids[]","data-placeholder":_x("Search for a category…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),"data-action":"woocommerce_json_search_categories",tabindex:"-1","aria-hidden":"true"},this.settings.excludedIds.category?Object.entries(this.settings.excludedIds.category).map((function(e){return m("[",null,m("option",{value:e[0],selected:"selected"},e[1]))})):"")))),m("section",{class:"px-8 pt-4 pb-8 space-y-4 text-gray-600 border-b"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},_x("Automatic campaign copywriting","settings panel - campaign copytext - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("p",{class:"text-sm text-gray-600"},_x("Offermative writes headlines and other copy text for you. You can change texts for every campaign later.","settings panel - campaign copytext - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:""},_x("What do your customers want? What are their burning desires? Why are they coming to your store?","settings panel - campaign copytext - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"target_desire[0]",class:"block w-full pl-12 form-input sm:text-sm sm:leading-5",placeholder:_x("achieve goals","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.settings.messageCopyParams.desires[0]||"",oninput:function(e){t.settings.messageCopyParams.desires[0]=e.target.value}}),m("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m("span",{class:"text-gray-400 sm:text-sm sm:leading-5"},_x("1. To","settings panel - copytext label","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"target_desire[1]",class:"block w-full pl-12 form-input sm:text-sm sm:leading-5",placeholder:_x("avoid mistakes","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.settings.messageCopyParams.desires[1]||"",oninput:function(e){t.settings.messageCopyParams.desires[1]=e.target.value}}),m("div",{class:"absolute inset-y-0 left-0 flex items-center pl-3 pointer-events-none"},m("span",{class:"text-gray-400 sm:text-sm sm:leading-5"},_x("2. To","settings panel - copytext label","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),m("div",{class:""},_x("One common word to categorize your customers:","settings panel - customer category","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"target_category",class:"block w-full form-input sm:text-sm sm:leading-5",placeholder:_x("e.g. users, customers, parents, marketers, students...","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.settings.messageCopyParams.audience||"",oninput:function(e){t.settings.messageCopyParams.audience=e.target.value}}))),m("div",{class:""},_x("Generate campaign messages in:","settings panel - section heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("select",{class:"sa-om-lang-search block w-full form-input sm:text-sm sm:leading-5",name:"sa-om-lang","data-placeholder":_x("Search for a language","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),tabindex:"-1","aria-hidden":"true"},Object.entries(this.availableLanguages).map((function(e){return m("[",null,m("option",{value:e[0],selected:e[0]==t.settings.messageCopyParams.language?"selected":""},e[1]))}))))),m("div",{id:"ad-copy-example",class:"mt-1 p-4 text-sm text-gray-800 border bg-yellow-50"},m("p",{class:"mb-2 text-xs text-gray-400 uppercase"},_x("Sample headlines","settings panel - section heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("ul",{class:"space-y-2 list-disc list-inside"},m("li",null,sprintf(_x("Attention %s: %s - now!","settings panel - section description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.settings.messageCopyParams.audience||_x("customers","settings panel - section details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.settings.messageCopyParams.desires[0]||_x("look good","settings panel - section details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("li",null,sprintf(_x("Want to %s and save big?","settings panel - section description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.settings.messageCopyParams.desires[1]||_x("get quick results","settings panel - section description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))))),m("section",{class:(this.onboarding?"hidden":"")+" px-8 pt-4 pb-8 space-y-4 text-gray-600 border-b"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},_x("About you","settings panel - section heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:""},_x("My name is","settings panel - section description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")," "," ",m("div",{class:"relative inline-block rounded-md shadow-sm"},m("input",{id:"name",class:"block w-32 form-input sm:text-sm sm:leading-5",placeholder:omDashboardParams.defaultAdminDetails.name||_x("John","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.settings.adminDetails.name||omDashboardParams.defaultAdminDetails.name,onfocusout:function(e){t.settings.adminDetails.name=e.target.value}}))," ",this.onboarding?_x(". Create my Offermative account using:","settings panel - onboarding description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x(", and you can email me at","settings panel - onboarding description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",null,m("span",{class:"relative inline-block rounded-md shadow-sm"},m("input",{id:"email",class:"block w-64 form-input sm:text-sm sm:leading-5",placeholder:omDashboardParams.defaultAdminDetails.email||_x("john@domain.com","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.settings.adminDetails.email||omDashboardParams.defaultAdminDetails.email,onfocusout:function(e){t.settings.adminDetails.email=e.target.value}})),this.onboarding?"":"."),this.onboarding?m("[",null,m("div",null,m("span",{class:"relative inline-block rounded-md shadow-sm"},m("input",{type:"password",id:"password",class:"block w-64 form-input sm:text-sm sm:leading-5",placeholder:_x("Password","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")}))),m("div",null,m("span",{class:"relative inline-block space-x-1"},m("input",{type:"checkbox",id:"terms",name:"terms",class:"w-4 h-4 transition duration-150 ease-in-out form-checkbox checked:bg-green-600"}),m("label",{for:"terms",class:"space-x-1"},m("span",null,_x("I agree to the","settings panel - terms and privacy-policy - checkbox","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("a",{href:"https://www.offermative.com/terms-and-conditions/",target:"_blank",class:"underline focus:outline-none"},_x("terms of use","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("span",null,_x("and","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("a",{href:"https://www.offermative.com/privacy-policy/",target:"_blank",class:"underline focus:outline-none"},_x("privacy policy","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))))):"")),m("div",{class:"text-gray-600 px-4 py-4 text-right"},m("a",{href:omDashboardParams.adminURL||"#",class:(this.isAccountTab||"1"==this.isSettingsEmpty?"":"hidden ")+"underline focus:outline-none"},_x("Back to WordPress Dashboard","settings panel - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))))),(this.onboarding||this.isAccountTab)&&r.a.flags.showNotification?m(i.a,null):null)}catch(e){OMErrorHandler.log("In Settings view:: ",e)}}}])&&s(t.prototype,a),o&&s(t,o),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(0);function r(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,i;return t=e,(a=[{key:"initialize",value:function(){try{this.campaignFlags=n.a.flags||{},this.notification=n.a.notification||{}}catch(e){OMErrorHandler.log("In Notifications initialize:: ",e)}}},{key:"view",value:function(){var e=this;try{return this.initialize(),setTimeout((function(){if(e.campaignFlags.showNotification){var t=document.getElementsByClassName("om-notification-close");t.length>0&&t[0].click()}}),8e3),m("div",{class:"fixed inset-0 flex items-end justify-center px-4 py-6 pointer-events-none sm:p-6 sm:items-start sm:justify-end",style:"z-index: 121001;"},m("div",{class:"w-full max-w-sm bg-white rounded-lg shadow-lg pointer-events-auto bottom-2 fixed"},m("div",{class:"overflow-hidden rounded-lg shadow-xs  text-white"},m("div",{class:("success"!=this.notification.status?"failed"==this.notification.status?"bg-red-600":"bg-yellow-300":"bg-green-400")+" p-3"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},m("svg",{class:"w-6 h-6",stroke:"currentColor",fill:"none","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"}))),m("div",{class:"ml-3 flex-1"},m("p",{class:"text-sm leading-5"},this.notification.message)),m("div",{class:"flex flex-shrink-0 ml-4"},m("button",{type:"button",class:"om-notification-close inline-flex p-1 rounded-md hover:bg-gray-700 focus:outline-none transition duration-150 ease-in-out",onclick:function(){setTimeout(e.campaignFlags.showNotification=0,2e3)}},m("svg",{class:"h-6 w-6 text-white",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})))))))))}catch(e){OMErrorHandler.log("In Notifications initialize:: ",e)}}}])&&r(t.prototype,a),i&&r(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,a){"use strict";a.d(t,"a",(function(){return se}));var n=a(0),r=a(2),i=a(1);function s(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function l(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(),this.initializeSelect2()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{0==n.a.selectedOfferTypes.size&&Object.keys(n.a.availableOfferTypes).forEach((function(e){return n.a.selectedOfferTypes.add(e)}))}catch(e){OMErrorHandler.log("In CampaignGenerate initialize:: ",e)}}},{key:"closeDialog",value:function(){try{n.a.currentCampaign={},n.a.generatedCampaigns=[],n.a.reset(),n.a.flags.enableCampaignGeneration=!0,n.a.showGenerateCampaignsDialog=!1,n.a.selectedOfferTypes=new Set}catch(e){OMErrorHandler.log("In CampaignGenerate closeDialog:: ",e)}}},{key:"oncreate",value:function(){try{this.initializeSelect2()}catch(e){OMErrorHandler.log("In CampaignGenerate oncreate:: ",e)}}},{key:"onupdate",value:function(){try{this.initializeSelect2()}catch(e){OMErrorHandler.log("In CampaignGenerate onupdate:: ",e)}}},{key:"initializeSelect2",value:function(){try{jQuery(":input.sa-om-category-search").filter(":not(.enhanced)").each((function(){var e=jQuery.extend({dropdownParent:jQuery("#om-generate-offer-settings-panel"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),minimumInputLength:jQuery(this).data("minimum_input_length")?jQuery(this).data("minimum_input_length"):3,escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"woocommerce_json_search_categories",security:wc_enhanced_select_params.search_categories_nonce}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a.name})})),{results:t}},cache:!0}},OMFunctions.getEnhancedSelectFormatString());jQuery(this).selectWoo(e).addClass("enhanced")})),jQuery(":input.sa-om-product-search").filter(":not(.enhanced)").each((function(){var e={dropdownParent:jQuery("#om-generate-offer-settings-panel"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),minimumInputLength:jQuery(this).data("minimum_input_length")?jQuery(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:jQuery(this).data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce,exclude:jQuery(this).data("exclude"),exclude_type:jQuery(this).data("exclude_type"),include:jQuery(this).data("include"),limit:jQuery(this).data("limit"),display_stock:jQuery(this).data("display_stock")}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0}};if(e=jQuery.extend(e,OMFunctions.getEnhancedSelectFormatString()),jQuery(this).selectWoo(e).addClass("enhanced"),jQuery(this).data("sortable")){var t=jQuery(this),a=jQuery(this).next(".select2-container").find("ul.select2-selection__rendered");a.sortable({placeholder:"ui-state-highlight select2-selection__choice",forcePlaceholderSize:!0,items:"li:not(.select2-search__field)",tolerance:"pointer",stop:function(){jQuery(a.find(".select2-selection__choice").get().reverse()).each((function(){var e=jQuery(this).data("data").id,a=t.find('option[value="'+e+'"]')[0];t.prepend(a)}))}})}else jQuery(this).prop("multiple")&&jQuery(this).on("change",(function(){var e=jQuery(this).children();e.sort((function(e,t){var a=e.text.toLowerCase(),n=t.text.toLowerCase();return a>n?1:a<n?-1:0})),jQuery(this).html(e)}))}))}catch(e){OMErrorHandler.log("In CampaignGenerate initialize Select2:: ",e)}}},{key:"view",value:function(){var e=this;try{return m("aside",{style:"z-index: 120000;",class:"fixed inset-x-0 bottom-0 lg:inset-0 lg:flex lg:items-center lg:justify-end"},m("div",{class:"fixed inset-0 transition-opacity"},m("div",{class:"absolute inset-0 bg-gray-500 opacity-75"})),m("div",{id:"om-generate-offer-settings-panel",class:"absolute inset-y-0 right-0 pl-20 w-4/12 max-w-xl"},m("div",{class:"h-full flex flex-col bg-gray-50 shadow-xl overflow-y-auto"},m("div",{class:"sticky top-0 z-10 w-full bg-gray-100"},m("nav",{class:"px-4 py-2 xl:px-4 lg:py-2"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex items-center flex-1 gap-2"},m("label",{class:"text-xl font-medium text-indigo-600 cursor-default"},_x("Generate Onsite Offer Campaigns","generate campaigns settings panel - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"flex items-center gap-4 ml-4 lg:ml-2"},m("span",{class:"rounded-md"},m("button",{onclick:function(){try{n.a.generate({offerTypes:s(n.a.selectedOfferTypes),product:jQuery('[name="product_ids[]"]').val(),category:jQuery('[name="category_ids[]"]').val()}),e.closeDialog()}catch(e){OMErrorHandler.log("In CampaignGenerate Generate click:: ",e)}},type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo"},_x("Generate","generate campaigns settings panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("button",{onclick:function(){try{e.closeDialog()}catch(e){OMErrorHandler.log("In CampaignGenerate close click:: ",e)}},class:"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100"},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M6 18L18 6M6 6l12 12"})))))))),m("div",{class:"grid w-full px-8 pt-4 text-gray-600"},m("section",{class:"mb-4 pb-4 space-y-4 text-gray-600 border-b"},m("div",{class:"flex flex-col text-sm leading-5 space-x-2"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},_x("What kind of offers would you like to generate today?","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("label",{class:"inline-flex items-center ml-2 mt-2 mb-1"},m("input",{id:"offer_om",checked:Object.keys(n.a.availableOfferTypes).length==n.a.selectedOfferTypes.size,type:"checkbox",class:"w-4 h-4 ml-2 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onclick:function(e){e.target.checked?Object.keys(n.a.availableOfferTypes).forEach((function(e){return n.a.selectedOfferTypes.add(e)})):n.a.selectedOfferTypes=new Set}}),m("span",{class:"ml-1 font-bold"},_x("Let Offermative decide","generate campaigns settings panel - offer types list","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),Object.keys(n.a.availableOfferTypes).map((function(e){return m("label",{class:"inline-flex items-center mb-1"},m("input",{id:e,type:"checkbox",checked:n.a.selectedOfferTypes.has(e),class:"w-4 h-4 ml-2 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onclick:function(e){e.target.checked?n.a.selectedOfferTypes.add(e.target.id):n.a.selectedOfferTypes.delete(e.target.id)}}),m("span",{class:"ml-1"},n.a.availableOfferTypes[e]))}))),m("div",{class:"mt-2 space-x-2 space-y-2 w-full"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},_x("Do you want to create offers only for specific products / categories?","generate campaigns settings panel - restrictions","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",null,m("span",{class:"text-sm text-gray-400"},_x("Generate offers for these products:","generate campaigns settings panel - restrictions - product","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("select",{class:"sa-om-product-search h-full block w-full mt-1 py-2 form-input sm:text-sm sm:leading-5",multiple:!0,name:"product_ids[]","data-placeholder":_x("Search for a product…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),"data-action":"om_json_search_products_only_and_not_variations",tabindex:"-1","aria-hidden":"true"})),m("div",null,m("span",{class:"text-sm text-gray-400"},_x("Generate offers for these product categories:","generate campaigns settings panel - restrictions - product category","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("select",{class:"sa-om-category-search h-full block w-full mt-1 py-2 form-input sm:text-sm sm:leading-5",multiple:!0,name:"category_ids[]","data-placeholder":_x("Search for a category…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),"data-action":"woocommerce_json_search_categories",tabindex:"-1","aria-hidden":"true"})))),m("section",{class:"text-gray-600"},m("h3",{class:"text-base font-medium leading-6 text-gray-900"},_x("Making offers live","generate campaigns settings panel - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("ul",{class:"space-y-0.5 list-disc list-inside"},m("li",null,_x("Click on the “Generate” button at the top. Offermative will generate a handful of onsite offer campaigns for you.","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x("You will see a preview of each campaign. You can edit rules, offered products, update discount type and amount, copy text and other details, set date / time for the offer to go live.","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x("Use back-next arrows at the top to navigate and review the generated campaigns.","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x('Tick the "Approve" box for each campaign you would like to run. If you do not like a campaign, do not approve it. Move to the other campaign.',"generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x('Click on "Publish Campaigns" once you are done.',"generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x("All approved campaigns will go live on the date / time set for each campaign. You can later modify the date / time for each approved campaign.","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x("You can manage all these campaigns from the Offermative dashboard.","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("li",null,_x("In case you don't like any campaigns, you can always come back and generate more campaigns.","generate campaigns settings panel - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))))))}catch(e){OMErrorHandler.log("In CampaignGenerate view:: ",e)}}}])&&l(t.prototype,a),r&&l(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.showGenerateCampaignsOptions=!1,this.initialize()}var t,a,s;return t=e,(a=[{key:"initialize",value:function(){try{this.campaignFlags=n.a.flags||{},this.dashboardFlags=i.a.flags||{}}catch(e){OMErrorHandler.log("In NavBar initialize:: ",e)}}},{key:"view",value:function(){var e=this;try{return this.initialize(),m("div",{class:"bg-gray-800"},m("nav",{class:"px-4 py-2 mx-auto max-w-7xl xl:px-8 lg:py-2"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex items-center"},m("div",{class:"flex-shrink-0"},m("h2",{class:"font-medium leading-7 tracking-wide text-gray-100 uppercase"},_x("Offermative","navigation bar - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"mr-4"},m("span",{class:"rounded-md shadow-sm"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){omDashboardParams.isValid?n.a.showGenerateCampaignsDialog=!0:(n.a.flags.showNotification=1,n.a.notification.message=_x("Upgrade to latest version of Offermative to continue working.","navigation bar - upgrade notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n.a.notification.status="failed")},disabled:!1===this.campaignFlags.enableCampaignGeneration?"disabled":""},m("svg",{class:"w-5 h-5 mr-2",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24","stroke-width":"2"},m("path",{d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})),_x("Generate Offer Campaigns","navigation bar - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("div",{class:"flex items-center ml-4 lg:ml-2"},m("button",{class:"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100",onclick:function(){window.open("https://www.offermative.com/contact/")}},m("svg",{class:"w-6 h-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"}))),m("button",{onclick:function(){e.dashboardFlags.showSettings=!0},class:"p-1 ml-3 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100"},m("svg",{class:"w-6 h-6",stroke:"currentColor",fill:"none",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}))))))),this.dashboardFlags.showSettings?m(r.a,null):null,n.a.showGenerateCampaignsDialog?m(c,null):null)}catch(e){OMErrorHandler.log("In NavBar view:: ",e)}}}])&&u(t.prototype,a),s&&u(t,s),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,n;return t=e,(a=[{key:"oncreate",value:function(){try{OMFunctions.loadChart({chartData:this.kpiData.chartData||[],domSelector:"#om-dashboard-chart"})}catch(e){OMErrorHandler.log("In KPI oncreate:: ",e)}}},{key:"initialize",value:function(){try{this.kpiData=i.a.data.kpi||{}}catch(e){OMErrorHandler.log("In KPI initialize:: ",e)}}},{key:"view",value:function(){try{this.initialize();var e=this.kpiData.earnings||0,t=this.kpiData.totalRevenue||0,a=this.kpiData.views||0,n=this.kpiData.orderCount||0,r=this.kpiData.orderItemCount||0;return m("header",{class:"bg-white shadow"},m("div",{class:"py-8 mx-auto max-w-7xl sm:px-3 xl:px-8"},m("div",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex sm:items-top"},m("div",{id:"om-dashboard-chart",class:"w-32 h-16 text-indigo-700 lg:w-64 hidden"}),m("div",{class:""},m("p",{class:"flex items-center text-5xl font-bold leading-none text-indigo-700"},m("span",{class:"mr-1 text-2xl font-normal"},omDashboardParams.currencySymbol)," ",OMFunctions.getNumber(e),m("span",{class:"ml-1 text-2xl font-medium"},omDashboardParams.decimalSeparator,OMFunctions.getDecimal(e))),m("p",{class:"mt-1 font-medium tracking-wide text-gray-400"},sprintf(_x("%s of Total Revenue","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),(t>0?Math.round(e/t*100):100)+"%")))),m("div",{class:"flex text-gray-400 sm:items-center"},m("div",{class:""},m("p",{class:"text-2xl font-bold leading-none text-gray-700"},a),m("p",{class:"mt-1 tracking-wide text-gray-400"}," "+sprintf(_x("View%s","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),a>1?_x("s","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))),m("svg",{class:"w-3 h-3 mx-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl font-bold leading-none text-gray-700"},n),m("p",{class:"mt-1 tracking-wide text-gray-400"}," "+sprintf(_x("Order%s","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n>1?_x("s","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))),m("svg",{class:"w-3 h-3 mx-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl font-bold leading-none text-gray-700"},r),m("p",{class:"mt-1 tracking-wide text-gray-400"}," "+sprintf(_x("Item%s Sold","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),r>1?_x("s","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))),m("svg",{class:"w-3 h-3 mx-4 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:""},m("p",{class:"text-2xl font-bold leading-none text-gray-700"},a>0?Math.round(n/a*100,2):0,"%"),m("p",{class:"mt-1 tracking-wide text-gray-400"}," "+_x("Conversion Rate","dashboard kpi's","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))))))}catch(e){OMErrorHandler.log("In KPI view:: ",e)}}}])&&p(t.prototype,a),n&&p(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function h(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function y(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{this.currentCampaignId=0,this.filteredCampaigns=i.a.data.filteredCampaigns||[],this.selectedCampaignIds=i.a.data.selectedCampaignIds||[],this.currentStatusFilter=n.a.flags.currentStatusFilter||"all"}catch(e){OMErrorHandler.log("In CampaignList initialize:: ",e)}}},{key:"getStatusColorCode",value:function(e){try{switch(e=e.toLowerCase()){case"completed":return"text-indigo-400";case"processing":return"text-green-400";case"on hold":return"text-orange-400";default:return"text-gray-600"}}catch(e){OMErrorHandler.log("In CampaignList getStatusColorCode:: ",e)}}},{key:"handleCampaignActions",value:function(e){try{if(this.selectedCampaignIds.length>0)switch(e){case"start":n.a.canAddMoreCampaigns()?n.a.enable(this.selectedCampaignIds,1):(n.a.flags.showNotification=1,n.a.notification.message=sprintf(_x("You can have max %d campaign%s active","campaign list - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),parseInt(n.a.flags.maxActiveCount),n.a.flags.maxActiveCount>1?_x("s","campaign list - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""),n.a.notification.status="warning");break;case"stop":n.a.enable(this.selectedCampaignIds,0);break;case"extend":n.a.extend(this.selectedCampaignIds)}else n.a.flags.showNotification=1,n.a.notification.message=_x("Please select atleast 1 campaign","campaign list - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n.a.notification.status="warning"}catch(e){OMErrorHandler.log("In CampaignList handleCampaignActions:: ",e)}}},{key:"view",value:function(){var e=this;this.initialize();try{return m("main",{class:"flex flex-col-reverse py-4 mx-auto my-4 max-w-7xl sm:px-3 xl:px-8 lg:flex lg:items-start lg:flex-row"},m("section",{class:"lg:w-2/3"},m("div",{class:"flex items-center"},m("h3",{class:"flex-1 text-lg font-bold text-gray-500 sm:text-3xl"},_x("Onsite Offer Campaigns","campaingn list - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",null,m("span",{class:"ml-4 rounded-md"},m("button",{type:"button",class:(0==this.selectedCampaignIds.length?"opacity-50 cursor-not-allowed ":"")+"px-3 py-2 text-sm font-medium leading-5 text-gray-600 transition duration-150 ease-in-out border border-gray-300 rounded-md shadow-sm hover:text-white hover:bg-red-600 focus:outline-none focus:border-red-600 focus:shadow-outline-red active:bg-red-500 active:text-white disabled:opacity-75",onclick:function(){e.handleCampaignActions("stop")}},_x("Pause","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("span",{class:"ml-4 rounded-md"},m("button",{type:"button",class:(0==this.selectedCampaignIds.length?"opacity-50 cursor-not-allowed ":"")+"px-3 py-2 text-sm font-medium leading-5 text-gray-600 transition duration-150 ease-in-out border border-gray-300 rounded-md shadow-sm hover:text-white hover:bg-green-600 focus:outline-none focus:border-green-600 focus:shadow-outline-green active:bg-green-500 active:text-white disabled:opacity-75",onclick:function(){e.handleCampaignActions("start")}},_x("Resume","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("span",{class:"ml-4 rounded-md"},m("button",{type:"button",class:(0==this.selectedCampaignIds.length?"opacity-50 cursor-not-allowed ":"")+"px-3 py-2 text-sm font-medium leading-5 text-gray-600 transition duration-150 ease-in-out border border-gray-300 rounded-md shadow-sm hover:text-white hover:bg-green-600 focus:outline-none focus:border-green-600 focus:shadow-outline-green active:bg-green-500 active:text-white disabled:opacity-75",onclick:function(){e.handleCampaignActions("extend")}},_x("Extend","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("select",{"aria-label":_x("Batch Actions","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),class:"om-campaign-list-batch-action py-2 pl-2 ml-4 leading-5 text-gray-600 bg-transparent form-select sm:text-sm disabled:opacity-75",onchange:function(e){i.a.filterCampaigns(e,e.target.value)}},m("option",{value:"all",selected:"all"==this.currentStatusFilter},_x("Show All","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("option",{value:"enabled",selected:"enabled"==this.currentStatusFilter},_x("Show Live Only","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("option",{value:"disabled",selected:"disabled"==this.currentStatusFilter},_x("Show Paused Only","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("option",{value:"expired",selected:"expired"==this.currentStatusFilter},_x("Show Expired Only","campaign list - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("ul",{class:"min-w-full text-gray-600"},this.filteredCampaigns.map((function(t){return m("li",{class:"my-6 overflow-hidden text-xs text-gray-400 transition duration-150 ease-in-out bg-white rounded-lg shadow-sm hover:bg-gray-50 focus:outline-none focus:bg-gray-50"},m("div",{class:"pl-4 pt-3 pb-4 pr-2",onclick:function(e){var a=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){h(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},t);"checkbox"!=(e.target.type||"")&&n.a.setCurrentCampaign(a)}},m("div",{class:"flex items-center space-x-2"},m("div",{class:"w-4"},m("input",{id:"select[]",type:"checkbox",checked:e.selectedCampaignIds.includes(t.id),class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onclick:function(e){i.a.handleRowSelection(t.id,e.target.checked)}})),m("div",{class:"flex-1 grid grid-cols-5 gap-3 items-center justify-center"},m("div",{class:"col-span-4 cursor-pointer"},m("div",{class:"w-full"},m("span",{class:("enabled"===t.status?"text-gray-800":"text-gray-400")+" text-xl leading-tight"},t.title||"")),m("div",{class:"flex items-center w-full mt-1 space-x-4"},m("div",{class:"uppercase whitespace-no-wrap"},m("span",{class:"mr-2"},"#",t.id),m("span",{class:("enabled"===t.status?Math.trunc((new Date).getTime()/1e3)<t.endAtDefault?Math.trunc((new Date).getTime()/1e3)<t.startAtDefault?"text-gray-400":"text-green-400":"text-red-400":"text-gray-400")+" uppercase"},("enabled"===t.status?Math.trunc((new Date).getTime()/1e3)<t.endAtDefault?Math.trunc((new Date).getTime()/1e3)<t.startAtDefault?_x("Scheduled","campaign list - status","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Active","campaign list - status","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Completed","campaign list - status","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Paused","campaign list - status","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))+" ")),m("span",{class:"uppercase"},OMFunctions.formatCamelCaseString(t.offerType)),m("div",{class:""},m("span",{class:"flex items-center"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1",viewBox:"0 0 24 24",class:"w-4 h-4"},m("path",{d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})),m("time",{datetime:t.startAt,class:"mx-1 whitespace-no-wrap"},t.startAtFormatted),"-",m("time",{datetime:t.endAt,class:"mx-1 whitespace-no-wrap"},t.endAtFormatted))),m("div",{class:"hidden lg:inline-block"},m("span",{class:"numeric"},t.hasOwnProperty("kpi")?t.kpi.orderCount:0)," "+sprintf(_x("Order%s","campaign list - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),t.hasOwnProperty("kpi")&&t.kpi.orderCount>1?_x("s","campaign list - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):"")))),m("div",{class:"col-span-1"},m("div",{class:"text-right cursor-pointer"},m("div",{class:("enabled"===t.status?"text-indigo-600":"text-indigo-400")+" text-sm font-medium leading-none numeric"},omDashboardParams.currencySymbol,OMFunctions.getNumber(t.earnings),omDashboardParams.decimalSeparator,OMFunctions.getDecimal(t.earnings)),m("div",null," ",_x("Revenue","campaign list - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")," ")))),m("div",{class:"cursor-pointer flex-0"},m("svg",{class:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20"},m("path",{"fill-rule":"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z","clip-rule":"evenodd"}))))))}))),m("div",{class:"py-2 border-t border-gray-200"},m("div",{class:"text-center"},n.a.flags.loadMore?m("a",{href:"#",class:"px-4 py-2 text-sm font-medium text-indigo-400 uppercase",onclick:function(e){n.a.load(e)}},_x("Load More","campaign list - load more","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")):m("span",{class:"px-4 py-2 text-sm font-medium text-indigo-400 uppercase"},_x("No more data to load","campaign list - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),m("section",{class:"pb-6 lg:pl-6 lg:w-1/3"},m("div",{class:""},m("h4",{class:"flex-1 mb-2 text-sm font-medium text-gray-400 uppercase"},_x("Recent Orders","campaign list - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:"overflow-hidden"},m("table",{class:"table-auto"},m("tbody",null,i.a.data.recentOrders.map((function(t){return m("tr",null,m("td",{class:"px-2 py-3 text-sm text-gray-500 border-b border-gray-200 xl:px-4 w-3/4"},t.customer),m("td",{class:"px-2 py-3 text-sm text-gray-500 whitespace-no-wrap border-b border-gray-200 xl:px-4 w-1/4"},m("div",{class:"flex items-center justify-end lg:justify-between xl:justify-end"},m("span",{class:"w-1/2"},m("a",{href:t.editURL,target:"_blank",class:"text-gray-500 underline focus:outline-none numeric"},"#",t.id)),m("span",{class:e.getStatusColorCode(t.status)+" ml-4 font-medium numeric w-1/4"},omDashboardParams.currencySymbol,OMFunctions.getNumber(t.orderTotal),omDashboardParams.decimalSeparator,OMFunctions.getDecimal(t.orderTotal)))))}))))))))}catch(e){OMErrorHandler.log("In CampaignList view:: ",e)}}}])&&y(t.prototype,a),r&&y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{this.currentCampaign=n.a.currentCampaign||{}}catch(e){OMErrorHandler.log("In Header initialize:: ",e)}}},{key:"view",value:function(){var e=this;try{return this.initialize(),m("header",{class:"px-4 py-2 sticky top-0 bg-gray-100 z-top"},m("div",{class:"flex items-center justify-between"},m("div",{class:"flex-1 flex items-center"},m("h2",{class:"text-xl font-medium leading-6 text-gray-700"},m("span",{class:"mr-2 text-indigo-600 numeric"},"#",this.currentCampaign.id||"")),m("div",{class:"relative rounded-md shadow-sm w-full"},m("input",{id:"campaign-title",class:"form-input block w-full sm:text-sm sm:leading-5 transition ease-in-out duration-150",placeholder:_x("Enter a name for this campaign","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:n.a.currentCampaignTitle||"",onchange:function(e){n.a.currentCampaignTitle=e.target.value;var t=n.a.currentCampaign.title||"";n.a.currentCampaignTitle!=t&&(n.a.flags.campaignEdited=!0)}}))),m("div",{class:"flex items-center mt-2 text-right lg:mt-0"},m("div",{class:"flex items-center ml-4 lg:ml-2"},n.a.generatedCampaigns.length>0?m("div",{class:"flex-1 flex items-center ml-4 lg:ml-2"},m("button",{class:(0==n.a.currentIndex?"Disabled ":"")+"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100",onclick:function(){n.a.previous()}},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M10 19l-7-7m0 0l7-7m-7 7h18"}))),m("button",{class:(n.a.currentIndex==n.a.generatedCampaigns.length-1?"Disabled ":"")+"p-1 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100",onclick:function(){n.a.next()}},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M14 5l7 7m0 0l-7 7m7-7H3"}))),m("div",{class:"inline-flex items-center ml-4 rounded-md text-green-600 justify-center px-2 py-1 border border-gray-300 hover:border-green-600 focus:outline-none focus:shadow-outline-green focus:border-green-600 space-x-1"},m("input",{id:this.currentCampaign.id,checked:n.a.acceptedCampaignsIds.has(this.currentCampaign.id),type:"checkbox",class:"w-4 h-4 transition duration-150 ease-in-out form-checkbox checked:bg-green-600",onclick:function(t){t.target.checked?n.a.acceptedCampaignsIds.add(e.currentCampaign.id):n.a.acceptedCampaignsIds.delete(e.currentCampaign.id)}}),m("label",{for:this.currentCampaign.id,class:""},_x("Approve","campaign details panel - header","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),n.a.acceptedCampaignsIds.size>0?m("span",{class:"ml-4 rounded-md flex-shrink-0"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){n.a.canAddMoreCampaigns()?n.a.save():(n.a.flags.showNotification=1,n.a.notification.message=sprintf(_x("You can have max %d campaign%s active","campaign details panel - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),parseInt(n.a.flags.maxActiveCount),n.a.flags.maxActiveCount>1?_x("s","campaign details panel - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""),n.a.notification.status="warning")}},sprintf(_x("Publish %d campaign%s","campaign details panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n.a.acceptedCampaignsIds.size,n.a.acceptedCampaignsIds.size>1?_x("s","campaign details panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))):""):m("div",{class:"flex-1 flex items-center ml-4 lg:ml-2"},m("button",{type:"button",onclick:function(){1==confirm(_x("Are you sure you want to permanently delete this campaign?","campaign details panel - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))&&n.a.delete(e.currentCampaign.id)},class:"flex items-center justify-center pr-1 pl-2 py-2 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out hover:text-red-600 focus:outline-none"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-4 h-4 mr-1"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))),m("span",{class:"ml-4 rounded-md flex-shrink-0"},m("button",{type:"button",class:"inline-flex justify-center w-full px-4 py-1 text-sm font-medium leading-5 text-white transition duration-150 ease-in-out bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-500 focus:outline-none focus:shadow-outline-indigo",onclick:function(){n.a.update()}},_x("Save","campaign details panel - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("button",{class:"p-1 ml-4 text-gray-400 transition duration-150 ease-in-out border-transparent rounded-full hover:text-gray-500 focus:outline-none focus:text-gray-500 focus:bg-gray-100",onclick:function(){0==n.a.generatedCampaigns.length&&n.a.flags.campaignEdited?1==confirm(_x("You have unsaved changes that would be lost.","campaign details panel - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))&&(n.a.editedOffer=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},n.a.currentCampaignOffer),n.a.refreshCurrentCampaignOffer(),n.a.updateMessageContent(),n.a.currentCampaign={},n.a.flags.campaignEdited=!1,n.a.reset()):(n.a.currentCampaign={},n.a.generatedCampaigns=[],n.a.reset(),n.a.flags.enableCampaignGeneration=!0)}},m("svg",{class:"w-6 h-6",stroke:"currentColor","stroke-width":"2",fill:"none",viewBox:"0 0 24 24"},m("path",{d:"M6 18L18 6M6 6l12 12"})))))))}catch(e){OMErrorHandler.log("In Header view:: ",e)}}}])&&w(t.prototype,a),r&&w(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,r;return t=e,(a=[{key:"getClassesForOrderStatus",value:function(e){try{switch(e){case"Pending":return"ml-3 text-gray-300";case"Refunded":return"ml-3 text-red-300";case"Completed":default:return"ml-3"}}catch(e){OMErrorHandler.log("In Analytics recent orders classesForOrderStatus:: ",e)}}},{key:"view",value:function(e){var t=this;try{return m("div",{class:"flex items-center justify-between py-3 mt-2 font-mono text-xs text-gray-500 border-b border-gray-100"},m("div",null,m("h4",{class:"font-sans uppercase"},_x("Recent Orders","campaign details panel - recent orders - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),n.a.currentCampaign.recentOrders.map((function(e){return m("div",{class:t.getClassesForOrderStatus(e.status)},m("a",{href:e.editURL,target:"_blank",class:"focus:outline-none numeric"},"#",e.id," ",e.status," ",omDashboardParams.currencySymbol,OMFunctions.getNumber(e.orderTotal),omDashboardParams.decimalSeparator,OMFunctions.getDecimal(e.orderTotal)))})),m("div",{class:"ml-3 font-sans text-right text-gray-300"},m("a",{class:"underline focus:outline-none disabled mr-1",href:"#"},_x("more","campaign details panel - recent orders - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),"→"))}catch(e){OMErrorHandler.log("In Analytics recent orders view:: ",e)}}}])&&k(t.prototype,a),r&&k(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"view",value:function(e){try{return m("div",{class:"flex items-center justify-between py-3 font-mono text-xs text-gray-500"},m("div",null,m("h4",{class:"font-sans uppercase"},_x("Top Sellers","campaign details panel - top products - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("div",{class:"ml-3"},_x("coming soon","campaign details panel - top products - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:"ml-3"},"..."),m("div",{class:"ml-3"},"..."),m("div",{class:"ml-3 font-sans text-right text-gray-300"},m("a",{class:"underline focus:outline-none disabled  mr-1",href:"#"},_x("more","campaign details panel - top products - link","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),"→"))}catch(e){OMErrorHandler.log("In Analytics top products view:: ",e)}}}])&&_(t.prototype,a),n&&_(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var P=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{if(this.currentCampaign=n.a.currentCampaign||{},this.data=i.a.data||{},this.kpi=this.data.kpi||{},0==Object.keys(this.kpi).length)throw _x("Campaign KPI blank","campaign details panel - warning message","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")}catch(e){OMErrorHandler.log("In Analytics initialize:: ",e)}}},{key:"onupdate",value:function(){try{OMFunctions.loadChart({chartData:this.currentCampaign.kpi.chartData||[],domSelector:"#om-campaign-chart"})}catch(e){OMErrorHandler.log("In Analytics onupdate:: ",e)}}},{key:"view",value:function(){try{var e=this.currentCampaign.earnings||0,t=this.kpi.totalRevenue||0,a=this.currentCampaign.kpi.views||0,n=this.currentCampaign.kpi.orderCount||0;return m("div",{class:"bg-white shadow"},m("div",{class:"px-8 py-4 mx-auto"},m("div",{class:"md:flex md:items-center md:justify-between"},m("div",{class:"flex items-center"},m("div",{class:"flex items-center"},m("div",{id:"om-campaign-chart",class:"w-32 h-16 text-indigo-700 hidden"})),m("div",{class:"flex items-center"},m("p",{class:"flex items-center text-2xl font-bold leading-none text-indigo-700"},m("span",{class:"mr-1 text-base font-normal"},omDashboardParams.currencySymbol)," ",OMFunctions.getNumber(e),m("span",{class:"ml-1 text-base font-medium"},omDashboardParams.decimalSeparator,OMFunctions.getDecimal(e))),m("p",{class:"ml-3 text-sm text-gray-400"},sprintf(_x("%s of Total Revenue","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),(t>0?Math.round(e/t*100):100)+"%")))),m("div",{class:"flex items-center text-gray-400"},m("div",{class:"flex items-center"},m("span",{class:"ml-1 text-sm text-gray-400"},m("span",{class:"text-xl font-bold leading-none text-gray-700"},a)," "+sprintf(_x("View%s","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),a>1?_x("s","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))),m("svg",{class:"w-3 h-3 mx-3 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"flex items-center"},m("span",{class:"ml-1 text-sm text-gray-400"},m("span",{class:"text-xl font-bold leading-none text-gray-700"},n)," "+sprintf(_x("Order%s","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n>1?_x("s","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))),m("svg",{class:"w-3 h-3 mx-3 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"flex items-center"},m("span",{class:"ml-1 text-sm text-gray-400"},m("span",{class:"text-xl font-bold leading-none text-gray-700"},this.currentCampaign.kpi.orderItemCount||0)," "+sprintf(_x("Item%s Sold","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.currentCampaign.hasOwnProperty("kpi")&&this.currentCampaign.kpi.orderItemCount>1?_x("s","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):""))),m("svg",{class:"w-3 h-3 mx-3 fill-current",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},m("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z"})),m("div",{class:"flex items-center"},m("span",{class:"ml-1 text-sm text-gray-400"},m("span",{class:"text-xl font-bold leading-none text-gray-700"},a>0?Math.round(n/a*100,2):0,"%")," "+_x("Conversion Rate","campaign details panel - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),this.currentCampaign.recentOrders&&this.currentCampaign.recentOrders.length>0?m(O,null):null,this.currentCampaign.recentOrders&&this.currentCampaign.recentOrders.length>0?m(j,null):null," "))}catch(e){OMErrorHandler.log("In Analytics view:: ",e)}}}])&&M(t.prototype,a),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function I(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function S(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?I(Object(a),!0).forEach((function(t){E(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):I(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function E(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function D(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var R=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){var e=this;try{if(this.currentDate=(new Date).toISOString().slice(0,10),this.currentCampaign=n.a.currentCampaign||{},this.campaignParams=S({},n.a.currentCampaignParams)||{},this.offer=this.currentCampaign.offer||{},this.discount=S({},this.offer.discount)||{},this.discountValue=this.discount.value||0,this.discountValue=n.a.flags.campaignEdited&&n.a.editedOffer.discount?n.a.editedOffer.discount.value:this.discountValue,this.discountType=this.discount.type||"%",this.discountType=n.a.flags.campaignEdited&&n.a.editedOffer.discount?n.a.editedOffer.discount.type:this.discountType,this.offerRules=this.offer.rules||[],this.ruleGroups=this.offerRules[0].rules||[],this.baseRules=this.ruleGroups[0].rules||[],this.baseRule=this.baseRules.find((function(e){return"page"===e.type}))||{},this.offerType=0<this.discountValue?_x("Discount","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("Nudge","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.baseRuleValues=new Set,this.baseRule.value&&(Array.isArray(this.baseRule.value)?this.baseRule.value.map((function(t){return e.baseRuleValues.add(t)})):this.baseRuleValues.add(this.baseRule.value)),this.offeredProductType=-1!=this.offer.type.indexOf("reco")?"reco":"",this.offeredProductId="",this.offeredProductTitle="",Array.isArray(this.offer.product.id)&&0==this.offer.product.id.length&&(this.offer.product.id=""),this.offer.product&&this.offer.product.id&&"reco"!=this.offeredProductType){var t=this.offer.product.type||"";this.offeredProductId=this.offer.product.id;var a=S({},this.campaignParams.products)||{};this.offeredProductType="product","category"==t&&(a=S({},this.campaignParams.productCategories)||{},this.offeredProductType="category"),this.offeredProductTitle=a.hasOwnProperty(parseInt(this.offeredProductId))?OMFunctions.htmlDecode(a[this.offeredProductId].name):this.offeredProductId}}catch(e){OMErrorHandler.log("In Offer initialize:: ",e)}}},{key:"initializeDatePicker",value:function(){try{var e=this,t=jQuery(".campaign-dates").data("Zebra_DatePicker");t&&t.destroy(),jQuery(".campaign-dates").Zebra_DatePicker({format:"Y-m-d H:i:s",show_icon:!1,show_select_today:!1,default_position:"below",readonly_element:!1,onSelect:function(t,a){e.refreshCurrentCampaignMeta(jQuery(this).attr("id"),t)}}).attr("placeholder","YYYY-MM-DD HH:MM:SS")}catch(e){OMErrorHandler.log("In Offer initialize DatePicker:: ",e)}}},{key:"initializeSelect2",value:function(){try{var e=this;jQuery("#om-campaign-offer .select2").remove(),jQuery(":input.sa-om-category-search").each((function(){var t=this,a=jQuery.extend({dropdownParent:jQuery("#om-campaign-offer"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),minimumInputLength:jQuery(this).data("minimum_input_length")?jQuery(this).data("minimum_input_length"):3,escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:"woocommerce_json_search_categories",security:wc_enhanced_select_params.search_categories_nonce}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a.formatted_name,displayText:a.name})})),{results:t}},cache:!0}},OMFunctions.getEnhancedSelectFormatString());jQuery(this).selectWoo(a),jQuery(this).on("change",(function(a){n.a.currentCampaignParams.productCategories[a.currentTarget.value]={name:jQuery(t).select2("data")[0].displayText},n.a.generatedCampaigns.length>0?e.offer.product.id=jQuery(t).val():e.refreshValues("productId",a.currentTarget.value),e.refreshCampaign()})),jQuery(this).data("select2").$dropdown.find(":input.select2-search__field").attr("placeholder",_x("Search for product category","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))})),jQuery(":input.sa-om-product-search").each((function(){var t=this,a={dropdownParent:jQuery("#om-campaign-offer"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),minimumInputLength:jQuery(this).data("minimum_input_length")?jQuery(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:jQuery(this).data("action")||"woocommerce_json_search_products_and_variations",security:wc_enhanced_select_params.search_products_nonce,exclude:jQuery(this).data("exclude"),exclude_type:jQuery(this).data("exclude_type"),include:jQuery(this).data("include"),limit:jQuery(this).data("limit"),display_stock:jQuery(this).data("display_stock")}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:e,text:a})})),{results:t}},cache:!0}};a=jQuery.extend(a,OMFunctions.getEnhancedSelectFormatString()),jQuery(this).selectWoo(a),jQuery(this).on("change",(function(a){n.a.currentCampaignParams.products[a.currentTarget.value]={name:jQuery(t).select2("data")[0].text},n.a.generatedCampaigns.length>0?e.offer.product.id=parseInt(jQuery(t).val()):e.refreshValues("productId",parseInt(a.currentTarget.value)),e.refreshCampaign()})),jQuery(this).data("select2").$dropdown.find(":input.select2-search__field").attr("placeholder",_x("Search for product","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))})),jQuery(":input.sa-om-page-search").each((function(t){var a=this,r=jQuery.extend({dropdownParent:jQuery("#om-campaign-offer"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder"),escapeMarkup:function(e){return e}},OMFunctions.getEnhancedSelectFormatString());jQuery(this).selectWoo(r),jQuery(this).on("change",(function(t){n.a.generatedCampaigns.length>0?e.baseRule.value=jQuery(a).val():e.refreshValues("pages",jQuery(a).val())}))}))}catch(e){OMErrorHandler.log("In Offer initialize Select2:: ",e)}}},{key:"refreshCampaign",value:function(){try{n.a.refreshCurrentCampaignOffer(),n.a.updateMessageContent(),m.redraw()}catch(e){OMErrorHandler.log("In Offer refreshCampaign:: ",e)}}},{key:"refreshValues",value:function(e,t){try{n.a.editedOffer[e]=t,n.a.flags.campaignEdited=!0}catch(e){OMErrorHandler.log("In Offer refreshValues:: ",e)}}},{key:"oncreate",value:function(){try{jQuery("#om-campaign-offer").trigger("wc-enhanced-select-init"),this.initializeSelect2(),this.initializeDatePicker()}catch(e){OMErrorHandler.log("In Offer oncreate:: ",e)}}},{key:"refreshCurrentCampaignMeta",value:function(e,t){try{n.a.currentCampaign[e]=t,n.a.flags.campaignEdited=!0}catch(e){OMErrorHandler.log("In Offer refreshValues:: ",e)}}},{key:"onupdate",value:function(){try{jQuery("#om-campaign-offer").trigger("wc-enhanced-select-init"),this.initializeSelect2(),this.initializeDatePicker()}catch(e){OMErrorHandler.log("In Offer onupdate:: ",e)}}},{key:"view",value:function(){var e=this;try{var t=this;return this.initialize(),m("div",{id:"om-campaign-offer",class:"w-1/4 mr-8"},m("div",{class:"flex items-center text-sm font-medium leading-5 space-x-2"},m("span",{class:"text-gray-700 uppercase"},this.offerType),m("div",{class:"relative rounded-md shadow-sm"},m("input",{id:"offer_discount",class:"block w-full pl-2 pr-12 form-input sm:text-sm sm:leading-5 py-1",placeholder:"20",value:this.discountValue,oninput:function(e){n.a.generatedCampaigns.length>0?t.offer.discount.value=e.target.value:t.refreshValues("discount",{value:e.target.value,type:t.offer.discount.type}),t.refreshCampaign()}}),m("div",{class:"absolute inset-y-0 right-0 flex items-center"},m("select",{"aria-label":_x("Discount Type","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),class:"h-full py-0 pl-2 pr-8 text-gray-500 bg-transparent border-transparent form-select sm:text-sm sm:leading-5",id:"offer_discount_type",onchange:function(e){n.a.generatedCampaigns.length>0?t.offer.discount.type=e.target.value:t.refreshValues("discount",{value:t.offer.discount.value,type:e.target.value}),t.refreshCampaign()}},m("option",{value:"percent",selected:"percent"==this.discountType?"selected":""},"%"),m("option",{value:"amount",selected:"amount"==this.discountType?"selected":""},omDashboardParams.currencySymbol))))),""!=this.offeredProductType?m("div",{class:"flex items-baseline mt-3 space-x-2 w-full"},m("span",{class:"w-12 text-xs text-gray-400 uppercase"},_x("For","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),"reco"==this.offeredProductType?m("span",{class:"ml-4 px-2 py-0.5 rounded-md bg-green-100 text-green-800 capitalize"},_x("Recommended Products","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")):m("select",{class:("product"==this.offeredProductType?"sa-om-product-search":"sa-om-category-search")+" h-full block w-full mt-1 py-2 form-input sm:text-sm sm:leading-5",name:"product"==this.offeredProductType?"product_id":"category_id","data-placeholder":sprintf(_x("Search for a %s ...","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),this.offeredProductType),"data-action":"product"==this.offeredProductType?"om_json_search_products_only_and_not_variations":"woocommerce_json_search_categories",tabindex:"-1","aria-hidden":"true"},m("option",{value:this.offeredProductId,selected:!0},this.offeredProductTitle))):"",this.baseRule?m("div",{class:"flex items-center mt-3 space-x-2 w-full"},m("span",{class:"w-12 text-xs text-gray-400 uppercase"},("neq"==this.baseRule.operator||"nin"==this.baseRule.operator?_x("Not","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):"")+" "+_x("On Pages","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("select",{class:"sa-om-page-search block w-full mt-1 form-input sm:text-sm sm:leading-5",multiple:!0,name:"page_ids[]","data-placeholder":_x("Search for a page…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),tabindex:"-1","aria-hidden":"true"},omDashboardParams.offerPages.map((function(t){return m("[",null,m("option",{value:t,selected:e.baseRuleValues.has(t)?"selected":""},OMFunctions.formatCamelCaseString(OMFunctions.htmlDecode(t))))})))):"",m("div",{class:"items-center mt-3 space-y-2 w-full"},m("div",{class:"flex items-center space-x-2 w-full"},m("span",{class:"w-12 text-xs text-gray-400 uppercase"},_x("from","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("input",{id:"startAt",min:this.currentDate,type:"text",class:"campaign-dates form-input sm:leading-5 py-1 px-1 text-xs",value:this.currentCampaign.startAt||this.currentDate,onchange:function(t){e.refreshCurrentCampaignMeta(t.target.id,t.target.value)}})),m("div",{class:"flex items-center space-x-2 w-full"},m("span",{class:"w-12 text-xs text-gray-400 uppercase"},_x("to","campaign details panel - campaign offer","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("input",{id:"endAt",min:this.currentDate,type:"text",class:"campaign-dates form-input w-34 sm:leading-5 py-1 px-1 text-xs",value:this.currentCampaign.endAt||this.currentDate,onchange:function(t){e.refreshCurrentCampaignMeta(t.target.id,t.target.value)}}))))}catch(e){OMErrorHandler.log("In Offer view:: ",e)}}}])&&D(t.prototype,a),r&&D(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var n,r,i=[],s=!0,o=!1;try{for(a=a.call(e);!(s=(n=a.next()).done)&&(i.push(n.value),!t||i.length!==t);s=!0);}catch(e){o=!0,r=e}finally{try{s||null==a.return||a.return()}finally{if(o)throw r}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function T(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?T(Object(a),!0).forEach((function(t){z(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):T(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function z(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function G(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var F=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{this.initialize(t)}catch(e){OMErrorHandler.log("In Rule constructor:: ",e)}}var t,a,r;return t=e,(a=[{key:"initialize",value:function(e){try{this.ruleGroupId=e.attrs.ruleGroupId||0,this.ruleId=e.attrs.id||0,this.ruleKey=e.attrs.key||"",this.isOnlyChild=e.attrs.isOnlyChild||0,this.campaignParams=Q({},n.a.currentCampaignParams)||{},this.productTitles=Q({},this.campaignParams.products)||{},this.productCategoryTitles=Q({},this.campaignParams.productCategories)||{},this.setCurrentRule(),this.refreshValues()}catch(e){OMErrorHandler.log("In Rule initialize:: ",e)}}},{key:"oncreate",value:function(){try{this.intializeSelectwoo()}catch(e){OMErrorHandler.log("In Rule oncreate:: ",e)}}},{key:"onupdate",value:function(){try{this.intializeSelectwoo()}catch(e){OMErrorHandler.log("In Rule onupdate:: ",e)}}},{key:"setCurrentRule",value:function(){try{if(this.offerRules=n.a.currentCampaignRuleGroups||[],this.ruleGroups=[],this.offerRules.length>0){var e=this.offerRules[0].rules||[];this.ruleGroups=e.filter((function(e){return!n.a.deletedRuleKeys.has(e.key)}))}this.ruleGroup=this.ruleGroups[this.ruleGroupId]||[];var t=this.ruleGroup.rules||[];this.rules=t.filter((function(e){return!n.a.deletedRuleKeys.has(e.key)})),this.rule=this.rules[this.ruleId]||{};var a=n.a.editedRules.rules||{};this.rule=a[this.ruleKey]||this.rule,this.field=this.rule.type||"",this.op=this.rule.operator||"",this.value=this.rule.value||"",this.meta=this.rule.meta||{},""==this.field&&Object.keys(n.a.availableRules).length>0&&(this.field=Object.keys(n.a.availableRules)[0]||"")}catch(e){OMErrorHandler.log("In Rule setCurrentRule:: ",e)}}},{key:"refreshRule",value:function(){try{n.a.editedRules.rules&&(n.a.editedRules.rules[this.ruleKey]={type:this.field,operator:this.op,value:this.value,key:this.ruleKey,meta:this.meta},n.a.flags.campaignEdited=!0)}catch(e){OMErrorHandler.log("In Rule refreshRule:: ",e)}}},{key:"refreshValues",value:function(){try{if(this.fieldObj=n.a.availableRules[this.field]||{},this.fieldType=this.fieldObj.type||"string",this.possibleOperators=this.fieldObj.possibleOperators||{},this.possibleValues=this.fieldObj.possibleValues||[],""==this.op&&Object.keys(this.possibleOperators).length>0&&(this.op=Object.keys(this.possibleOperators)[0]||"",this.refreshRule()),""==this.value&&this.possibleValues.length>0){var e=this.possibleValues[0]||{};this.value=e.key||"",this.refreshRule()}}catch(e){OMErrorHandler.log("In Rule refreshValues:: ",e)}}},{key:"initializeProdCatSelectWoo",value:function(e){try{var t=e.ruleObj,a=jQuery.extend({dropdownParent:jQuery("#om-campaign-rules"),allowClear:!!jQuery(e.elObj).data("allow_clear"),placeholder:e.placeholder||jQuery(e.elObj).data("placeholder"),minimumInputLength:jQuery(e.elObj).data("minimum_input_length")?jQuery(e.elObj).data("minimum_input_length"):3,escapeMarkup:function(e){return e},ajax:{url:wc_enhanced_select_params.ajax_url,dataType:"json",delay:250,data:function(t){return{term:t.term,action:e.action,security:e.nonce}},processResults:function(e){var t=[];return e&&jQuery.each(e,(function(e,a){t.push({id:+e,text:a instanceof Object?a.name:a})})),{results:t}},cache:!0}},OMFunctions.getEnhancedSelectFormatString());jQuery(e.elObj).selectWoo(a),jQuery(e.elObj).off("change").on("change",(function(a){t.ruleGroupId=a.target.getAttribute("rule-group-id"),t.ruleId=a.target.getAttribute("rule-id"),t.ruleKey=a.target.getAttribute("rule-key"),t.setCurrentRule();var r=jQuery(e.elObj).select2("data"),i=[];t.value=Array.isArray(t.value)?t.value:[t.value],r.map((function(a){var r=a.id||"";r&&!i.includes(+r)&&(i.push(+r),t.value.includes(+r)||jQuery(e.elObj).find('option[value="'+r+'"]').remove(),n.a.currentCampaignParams[e.dataKey][r]={id:+r,name:a.displayText||a.text})})),i.length>1?(t.value=i,"eq"==t.op?t.op="in":"neq"==t.op&&(t.op="nin")):(t.value=+i[0],"in"==t.op?t.op="eq":"nin"==t.op&&(t.op="neq")),t.refreshRule(),m.redraw()}))}catch(e){OMErrorHandler.log("In Rule initializeProdCatSelectWoo:: ",e)}}},{key:"intializeSelectwoo",value:function(){try{var e=this;jQuery("#om-campaign-rules .select2").remove(),jQuery(".om-campaigns-rule-select").each((function(t){var a=jQuery.extend({dropdownParent:jQuery("#om-campaign-rules"),allowClear:!!jQuery(this).data("allow_clear"),placeholder:jQuery(this).data("placeholder")||"",escapeMarkup:function(e){return e}},OMFunctions.getEnhancedSelectFormatString());jQuery(this).selectWoo(a).off("change").on("change",(function(t){var a=t.target.value||"";e.ruleGroupId=t.target.getAttribute("rule-group-id"),e.ruleId=t.target.getAttribute("rule-id"),e.ruleKey=t.target.getAttribute("rule-key"),jQuery(this).parent().find(".select-op").select2("destroy"),jQuery(this).parent().find(".select-value").select2("destroy"),e.setCurrentRule(),jQuery(this).hasClass("select-field")?(e.op="",e.value="",e.field=a,e.fieldObj=n.a.availableRules[e.field]||{},e.refreshRule()):jQuery(this).hasClass("select-op")?(e.op=a,e.refreshRule()):jQuery(this).hasClass("select-value")&&(e.value=a,e.refreshRule()),m.redraw()}))})),jQuery(":input.sa-om-rules-category-search").each((function(){e.initializeProdCatSelectWoo({action:"woocommerce_json_search_categories",nonce:wc_enhanced_select_params.search_categories_nonce,dataKey:"productCategories",placeholder:_x("Search for product category...","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),ruleObj:e,elObj:this})})),jQuery(":input.sa-om-rules-product-search").each((function(){e.initializeProdCatSelectWoo({action:"woocommerce_json_search_products_and_variations",nonce:wc_enhanced_select_params.search_products_nonce,dataKey:"products",placeholder:_x("Search for product...","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),ruleObj:e,elObj:this})}))}catch(e){OMErrorHandler.log("In Rule intializeSelectwoo:: ",e)}}},{key:"renderFieldSelect",value:function(){var e=this;try{return m("[",null,0==this.ruleGroupId?Object.entries(n.a.availableRules).map((function(t){var a=A(t,2),n=a[0],r=a[1];return e.field===n?m("label",{class:"w-1/3 max-w-1/3 py-2 text-sm leading-5 text-gray-700 form-input bg-transparent cursor-not-allowed"},r.title||n):""})):m("select",{"rule-group-id":this.ruleGroupId,"rule-id":this.ruleId,"rule-key":this.ruleKey,placeholder:_x("Select rule","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),class:"w-1/3 max-w-1/3 py-2 pl-3 pr-8 text-sm font-medium leading-5 capitalize text-gray-700 bg-transparent form-select om-campaigns-rule-select select-field"},Object.entries(n.a.availableRules).map((function(t){var a=A(t,2),n=a[0],r=a[1];return"page"!=n?m("option",{value:n,selected:e.field===n?"selected":""},r.title||n):""}))))}catch(e){OMErrorHandler.log("In Rule renderFieldSelect:: ",e)}}},{key:"renderOperatorSelect",value:function(){var e=this;try{return m("[",null,0==this.ruleGroupId?Object.entries(this.possibleOperators).map((function(t){var a=A(t,2),n=a[0],r=a[1];return e.op===n?m("label",{class:"w-1/6 max-w-1/6 py-2 text-sm leading-5 text-gray-700 form-input bg-transparent cursor-not-allowed"},r||n):""})):m("select",{"rule-group-id":this.ruleGroupId,"rule-id":this.ruleId,"rule-key":this.ruleKey,class:"w-1/6 max-w-1/6 py-2 pl-3 pr-8 text-sm leading-5 text-gray-500 bg-transparent form-select om-campaigns-rule-select select-op"},Object.entries(this.possibleOperators).map((function(t){var a=A(t,2),n=a[0],r=a[1];return m("option",{value:n,selected:e.op===n?"selected":""},r||n)}))))}catch(e){OMErrorHandler.log("In Rule renderOperatorSelect:: ",e)}}},{key:"renderValues",value:function(){var e=this;try{var t=_x("Enter value","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),a="",n="",r="",i={},s=this.value||"",o=this.field.toLowerCase(),l=["lte","gte"];if(Object.keys(Object.keys(this.possibleOperators).filter((function(e){return l.includes(e)}))).length>0||(o.includes("category")?(r="sa-om-rules-category-search",a=_x("Search for a category…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n="woocommerce_json_search_categories",i=this.productCategoryTitles,s=Array.isArray(s)?s:[s]):this.field.toLowerCase().includes("product")&&(a=_x("Search for a product…","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),n="om_json_search_products_only_and_not_variations",r="sa-om-rules-product-search",i=this.productTitles,s=Array.isArray(s)?s:[s])),0==this.ruleGroupId&&Array.isArray(s)){var c=[];Object.keys(i).map((function(e){return s.includes(+e)?c.push(i[e].name||e):""})),s=c.length>0?c.join(", "):s.join(", ")}return m("[",null,0==this.ruleGroupId?m("label",{class:"w-1/3 max-w-1/2 py-2 text-sm leading-5 text-gray-700 form-input bg-transparent cursor-not-allowed"},s||"-"):m("div",{class:"flex-1 relative w-1/3 max-w-1/3"},this.possibleValues.length>0||""!=a&&""!=n?m("select",{"rule-group-id":this.ruleGroupId,"rule-id":this.ruleId,"rule-key":this.ruleKey,class:(""!=r?r:"om-campaigns-rule-select")+" w-full max-w-full py-2 pl-3 pr-8 text-sm font-medium leading-5 capitalize text-gray-700 bg-transparent form-select select-value","data-action":n||"",multiple:""!=a&&""!=n},""!=a&&""!=n?s.map((function(e){return i.hasOwnProperty(e)?m("option",{value:e,selected:!0},i[e].name||e):""})):this.possibleValues.map((function(t){return m("option",{value:t.key,selected:e.value.toString()===t.key.toString()?"selected":""},t.value||t.key)}))):m("input",{type:"numeric"==this.fieldType?"number":"text","rule-group-id":this.ruleGroupId,"rule-id":this.ruleId,"rule-key":this.ruleKey,class:"w-full max-w-full py-2 text-sm leading-5 text-gray-700 form-input",placeholder:t,value:s,oninput:function(t){e.value=t.target.value,e.ruleGroupId=t.target.getAttribute("rule-group-id"),e.ruleId=t.target.getAttribute("rule-id"),e.refreshRule()}})))}catch(e){OMErrorHandler.log("In Rule renderValues:: ",e)}}},{key:"addConditionRow",value:function(){var e=this;try{return m("div",{key:this.ruleKey,class:("page"==this.field?"hidden ":" ")+" flex items-center gap-2 w-full"},this.renderFieldSelect(),this.renderOperatorSelect(),this.renderValues(),m("button",{type:"button",onclick:function(){n.a.deletedRuleKeys.add(e.ruleKey),n.a.flags.campaignEdited=!0},class:(this.isOnlyChild||0==this.ruleGroupId?"invisible":"")+" flex items-center justify-center p-1 text-xs leading-5 text-gray-300 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:shadow-outline-red focus:border-red-600"},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M15 12H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})))))}catch(e){OMErrorHandler.log("In Rule addConditionRow:: ",e)}}},{key:"view",value:function(e){try{return this.initialize(e),this.addConditionRow()}catch(e){OMErrorHandler.log("In Rule view:: ",e)}}}])&&G(t.prototype,a),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var L=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);try{this.initialize(t)}catch(e){OMErrorHandler.log("In RuleGroup constructor:: ",e)}}var t,a,r;return t=e,(a=[{key:"initialize",value:function(e){try{if(this.ruleGroupKey=e.attrs.key||"",this.ruleGroupId=e.attrs.id||0,this.isOnlyChild=e.attrs.isOnlyChild||0,this.offerRules=n.a.currentCampaignRuleGroups||[],this.ruleGroups=[],this.offerRules.length>0){var t=this.offerRules[0].rules||[];this.ruleGroups=t.filter((function(e){return!n.a.deletedRuleKeys.has(e.key)}))}this.ruleGroup=this.ruleGroups[this.ruleGroupId]||{},this.ruleGroupCondition=this.ruleGroup.condition||"AND";var a=n.a.editedRules.conditions||{};this.ruleGroupCondition=a[this.ruleGroupKey]||this.ruleGroupCondition;var r=this.ruleGroup.rules||[];this.rules=r.filter((function(e){return!n.a.deletedRuleKeys.has(e.key)})),this.isEmptyRuleGroup=!1,(0==this.rules.length||1==this.rules.length&&"page"==this.rules[0].type)&&(this.isEmptyRuleGroup=!0)}catch(e){OMErrorHandler.log("In RuleGroup initialize:: ",e)}}},{key:"view",value:function(e){var t=this;try{return this.initialize(e),m("div",{class:(this.isEmptyRuleGroup?"hidden ":"")+"px-4 pt-3 pb-2 mb-6 space-y-3 bg-gray-100 border-gray-200 rounded-md w-full"},m("div",{class:(0==this.ruleGroupId?"gap-1":"gap-2")+" flex items-center text-xs text-gray-400"},0==this.ruleGroupId?m("span",null,_x("This is a","campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")," ",m("span",{class:"font-bold"},_x("required","campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))," ",_x("group and cannot be modified.","campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")):"",m("span",null,sprintf(_x('%s is a "pass" when',"campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),0==this.ruleGroupId?_x("It","campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("This group","campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),0==this.ruleGroupId?m("span",null,m("label",{class:""},"AND"==this.ruleGroupCondition?_x("all","campaign details panel - rule group - condition","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("at least one","campaign details panel - rule group - condition","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))):m("div",{class:"flex items-center"},m("select",{"rule-group-key":this.ruleGroupKey,"aria-label":"match-type",class:"h-full py-0.5 pl-3 pr-8 font-medium text-gray-700 bg-transparent form-select text-xs",onchange:function(e){if(n.a.editedRules.conditions){var t=e.target.getAttribute("rule-group-key")||"";t&&(n.a.editedRules.conditions[t]=e.target.value)}}},m("option",{value:"AND",selected:"AND"==this.ruleGroupCondition?"selected":""},_x("all","campaign details panel - rule group - condition","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("option",{value:"OR",selected:"OR"==this.ruleGroupCondition?"selected":""},_x("at least one","campaign details panel - rule group - condition","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))),m("span",null,_x("of the following conditions are true.","campaign details panel - rule group - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))," "),this.rules.map((function(e,a){return m(F,{key:e.key,id:a,ruleGroupId:t.ruleGroupId,isOnlyChild:1==t.rules.length?1:0})})),m("div",{class:"flex items-center gap-6 pt-1"},m("button",{type:"button",class:(0==this.ruleGroupId?"invisible":"")+" flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-green-600 hover:border-green-600 focus:outline-none focus:shadow-outline-green focus:border-green-600",onclick:function(){n.a.addRule(t.ruleGroupId)}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-condition","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{d:"M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"})))," ",_x("Add a condition","campaign details panel - campaign rules - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")," ")," ",m("span",{class:"flex-1"}),m("button",{type:"button",class:"flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-indigo-600 hover:border-indigo-600 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-600",onclick:function(){n.a.addRule()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})))," ",_x("Add another group","campaign details panel - campaign rules - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")," "),this.isOnlyChild?"":m("button",{type:"button",class:(0==this.ruleGroupId?"hidden":"")+" flex items-center gap-1 justify-center px-1 py-0.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-red-600 hover:border-red-600 focus:outline-none focus:shadow-outline-red focus:border-red-600",onclick:function(){n.a.deletedRuleKeys.add(t.ruleGroupKey),n.a.flags.campaignEdited=!0}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-remove-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"})))," ",_x("Remove this group","campaign details panel - campaign rules - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")," ")))}catch(e){OMErrorHandler.log("In RuleGroup view:: ",e)}}}])&&N(t.prototype,a),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{if(this.condition="",this.isEmptyRules=!1,this.rulesArray=[],this.length=0,this.currentRuleGroup=0,this.offerRules=n.a.currentCampaignRuleGroups||[],this.ruleGroups=[],this.isBaseRuleGroupDisplayed=!0,this.isEmpty=!1,this.offerRules.length>0){var e=this.offerRules[0].rules||[];if(this.ruleGroups=e.filter((function(e){return!n.a.deletedRuleKeys.has(e.key)})),this.ruleGroups.length<=1){if(this.isEmpty=!0,1==this.ruleGroups.length){var t=(this.ruleGroups[0]||{}).rules||[];t.length<=1?(this.isEmpty=!0,1==t.length&&("page"==t[0].type?this.isEmpty=!0:this.isEmpty=!1)):this.isEmpty=!1}}else{var a=(this.ruleGroups[0]||{}).rules||[];1==a.length&&"page"==a[0].type&&(this.isBaseRuleGroupDisplayed=!1)}}else this.isEmpty=!0;this.ruleGroupsCondition=this.offerRules[0].condition||"AND",this.ruleGroupKey=this.offerRules[0].key||"";var r=n.a.editedRules.conditions||{};this.ruleGroupsCondition=r[this.ruleGroupKey]||this.ruleGroupsCondition}catch(e){OMErrorHandler.log("In Rules initialize:: ",e)}}},{key:"view",value:function(){try{return this.initialize(),m("div",{id:"om-campaign-rules",class:"w-3/4 text-sm leading-5 text-gray-500"},m("div",{class:"flex items-center gap-2 mb-3 font-medium text-gray-700 uppercase"},_x("Rules","campaign details panel - campaign rules - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("button",{type:"button",class:(this.isEmpty?"":"hidden ")+"flex items-center gap-1 justify-center px-1 py-1.5 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out border border-transparent rounded-md hover:text-indigo-600 hover:border-indigo-600 focus:outline-none focus:shadow-outline-indigo focus:border-indigo-600",onclick:function(){n.a.addRule()}},m("svg",{fill:"none",stroke:"currentColor",class:"w-5 h-5"},m("svg",{id:"icon-add-group","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 13h6m-3-3v6m-9 1V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v8a2 2 0 01-2 2H5a2 2 0 01-2-2z"}))),_x("Add rule group","campaign details panel - campaign rules - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),this.isEmpty?"":m("[",null,m("div",{class:"flex items-baseline gap-2 mb-3 -mt-1"},m("div",{class:"inline-flex items-center gap-2 text-xs text-gray-500"},m("span",null,sprintf(_x("When %s condition groups pass","campaign details panel - campaign rules - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),"AND"==this.ruleGroupsCondition?_x("all","campaign details panel - campaign rules - rule condition","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):_x("at least one","campaign details panel - campaign rules - rule condition","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))),m("div",{class:"items-baseline w-full"},this.mapRules())))}catch(e){OMErrorHandler.log("In Rules view:: ",e)}}},{key:"mapRules",value:function(){var e=this;try{if(this.currentRuleGroup=1,this.ruleGroups.length>0)return this.ruleGroups.map((function(t,a){return m(L,{id:a,key:t.key,isOnlyChild:1==e.ruleGroups.length||2==e.ruleGroups.length&&!e.isBaseRuleGroupDisplayed?1:0})}))}catch(e){OMErrorHandler.log("In Rules mapRules:: ",e)}}}])&&K(t.prototype,a),r&&K(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function V(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{this.currentCampaign=n.a.currentCampaign||{},this.contentPlaceholders=n.a.messageContentPlaceholders||[],this.content=n.a.defaultMessageContent||{},this.validMessages=this.currentCampaign.messages.filter((function(e){return!n.a.currentDeletedMessageIds.has(e.id)}))}catch(e){OMErrorHandler.log("In OfferConfig initialize:: ",e)}}},{key:"updateMessageContent",value:function(){try{n.a.selectedMessageIds.length>0?n.a.updateMessageContent():alert(_x("Nothing to update. Please make your changes first.","campaign details panel - message edit - warning notification","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))}catch(e){OMErrorHandler.log("In OfferConfig update:: ",e)}}},{key:"view",value:function(){var e=this;try{return this.initialize(),m("div",{class:"w-1/4 mr-8 xl:sticky xl:top-16"},m("h4",{class:"mb-3 text-sm font-medium text-gray-700 uppercase"},_x("Text","campaign details panel - message edit - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:(this.contentPlaceholders.includes("beforeHeading")?"":"hidden ")+"mb-3 text-sm"},_x("Before Headline","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"before-header",class:"block w-full text-sm leading-5 text-gray-600 form-input",placeholder:_x("e.g. author, parent, marketer, student...","placeholder","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),value:this.content.beforeHeading||"",onchange:function(t){e.content.beforeHeading=t.target.value}}))),m("div",{class:(this.contentPlaceholders.includes("heading")?"":"hidden ")+"mb-3 text-sm"},_x("Headline","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"header-text",class:"block w-full text-sm leading-5 text-gray-600 form-input",value:this.content.heading||"",onchange:function(t){e.content.heading=t.target.value}}))),m("div",{class:(this.contentPlaceholders.includes("afterHeading")?"":"hidden ")+"mb-3 text-sm"},_x("After Headline","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"after-header",class:"block w-full text-sm leading-5 text-gray-600 form-input",value:this.content.afterHeading||"",onchange:function(t){e.content.afterHeading=t.target.value}}))),m("div",{class:(this.contentPlaceholders.includes("body")?"":"hidden ")+"mb-3 text-sm"},_x("Body","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("textarea",{id:"body",rows:"4",class:"block w-full text-sm leading-5 text-gray-600 form-input",onchange:function(t){e.content.body=t.target.value}},this.content.body||""))),m("div",{class:(this.contentPlaceholders.includes("cartCTA")?"":"hidden ")+"mb-3 text-sm"},_x("Call to Action - Cart","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"cartCta-text",class:"block w-full text-sm leading-5 text-gray-600 form-input",value:this.content.cartCTA||"",onchange:function(t){e.content.cartCTA=t.target.value}}))),m("div",{class:(this.contentPlaceholders.includes("infoCTA")?"":"hidden ")+"mb-3 text-sm"},_x("Call to Action - Info","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"infoCta-text",class:"block w-full text-sm leading-5 text-gray-600 form-input",value:this.content.infoCTA||"",onchange:function(t){e.content.infoCTA=t.target.value}}))),m("div",{class:(this.contentPlaceholders.includes("altCTA")?"":"hidden ")+"mb-3 text-sm"},_x("Call to Action - Secondary","campaign details panel - message edit - details","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),m("div",{class:"relative mt-1 rounded-md shadow-sm"},m("input",{id:"altCta-text",class:"block w-full text-sm leading-5 text-gray-600 form-input",value:this.content.altCTA||"",onchange:function(t){e.content.altCTA=t.target.value}}))),m("div",{class:(1==this.validMessages.length?"hidden":"")+" mb-3 text-sm"},m("span",null,_x("Messages to change","campaign details panel - message edit - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:"mt-1"},m("div",{class:"flex items-center text-sm leading-5 text-gray-600"},m("input",{id:"all-messages",checked:this.validMessages.every((function(e){return n.a.selectedMessageIds.includes(e.id)})),type:"checkbox",class:"w-4 h-4 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onclick:function(e){n.a.handleMessageSelection("all",e.target.checked)}}),m("label",{for:"all-messages",class:""},m("span",{class:"mt-1 ml-1"},_x("All","campaign details panel - message edit - message ids","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),this.validMessages.map((function(e){return m("[",null,m("input",{id:e.id,type:"checkbox",checked:n.a.selectedMessageIds.indexOf(e.id)>-1,class:"w-4 h-4 ml-2 text-indigo-600 transition duration-150 ease-in-out form-checkbox",onclick:function(t){n.a.handleMessageSelection(e.id,t.target.checked)}}),m("label",{for:e.id,class:""},m("span",{class:"mt-1 ml-1"},"#",e.id)))}))))),m("div",{class:"mb-3 text-sm"},m("button",{type:"submit",class:"justify-center w-full px-4 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-indigo-700 bg-indigo-100 hover:bg-indigo-50 focus:outline-none focus:border-indigo-300 focus:shadow-outline-indigo active:bg-indigo-200 transition ease-in-out duration-150",onclick:function(){e.updateMessageContent()}},_x("Update text","campaign details panel - message edit - button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))))}catch(e){OMErrorHandler.log("In OfferConfig view:: ",e)}}}])&&V(t.prototype,a),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function W(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?q(Object(a),!0).forEach((function(t){Y(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function Y(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function J(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{if(this.currentCampaign=n.a.currentCampaign||{},this.campaignParams=W({},n.a.currentCampaignParams)||{},this.data=i.a.data||{},this.kpi=this.data.kpi||{},0==Object.keys(this.kpi).length)throw _x("Message KPI blank","campaign details panel - message preview - warning message","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")}catch(e){OMErrorHandler.log("In OfferPreview initialize:: ",e)}}},{key:"showModal",value:function(){try{var e=jQuery("#"+this.currentMessageId+"_content").text();this.currentOfferHTML={pre:e.substring(0,e.indexOf("<div")),content:e.substring(e.indexOf("<div"),e.indexOf("</body>")),post:e.substring(e.indexOf("</body>"))};var t="offer_html"+this.currentMessageId+"_container",a={id:t,tinymce:!1};n.a.modal={title:jQuery("#"+this.currentMessageId+"_content").data("title")||"Edit message template",content:'<textarea style="width:100%;height: 20em;" id=\''.concat(t,"'>").concat(this.currentOfferHTML.content||"","</textarea>"),autoHide:!1,cta:{title:_x("Ok","button","smart-manager-for-wp-e-commerce"),closeModalOnClick:!1,params:this,callback:function(e){var a=e.currentMessageId.split("_");a[1]&&(e.currentCampaign.messages[parseInt(a[1])].template=OMFunctions.encodeHtmlString("".concat(e.currentOfferHTML.pre).concat(jQuery("#"+t).val()).concat(e.currentOfferHTML.post)),e.currentOfferHTML={}),n.a.modal={}}},onCreate:OMFunctions.initializeWPEditor,onCreateParams:a,onUpdate:OMFunctions.initializeWPEditor,onUpdateParams:a}}catch(e){OMErrorHandler.log("In OfferPreview showModal:: ",e)}}},{key:"prepareMessageHTML",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{if(e=OMFunctions.decodeHtmlString(e)){var a=e.indexOf("<body"),n='class="',r=a+e.substring(a).indexOf(n)+n.length;e=OMFunctions.insertString(r,e,"offermative ")}t.cssURL=omDashboardParams.frontendTailwindCSSURL;var i=this.currentCampaign.offer||{},s=i.product||{},o=s.id||[],l={},c="";!Array.isArray(o)&&this.campaignParams.products&&"product"===i.type&&this.campaignParams.products[o]&&(c=this.campaignParams.products[o].type||"",l=W({},this.campaignParams.products[o])),"variable"!=c&&(e=e.replace(/om-product-options/g,"om-product-options hidden"));var u=Handlebars.compile(e);if(!l.hasOwnProperty("image")||l.hasOwnProperty("image")&&""==l.image){var d=omDashboardParams.defaultOfferedProductImage;t.featuredImage&&(d="function"==typeof t.featuredImage?t.featuredImage({}):t.featuredImage),l.image=d}l.hasOwnProperty("price")&&(l.price=omDashboardParams.currencySymbol+l.price);var m={content:t,product:l},p=s.count||3,f=["fimages/photo-girl-looking-back.jpg","fimages/photo-gift-box-blue-bg.jpg","fimages/photo-parcels-doorstep-delivery.jpg","fimages/illustration-brown-box.svg","fimages/illustration-brown-paperbag.svg"];if(omDashboardParams.assetsURL&&(f=f.map((function(e){return omDashboardParams.assetsURL+"/"+e}))),"reco"===i.type){for(var g=0,h=1;g<p;g++,h++){var y={image:f[g%f.length],name:_x("Recommended Product","campaign details panel - product recommendation - dummy product","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")+" "+h,price:omDashboardParams.currencySymbol+100*h,description:_x("Description of the recommended product.","campaign details panel - product recommendation - dummy product description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),optionLabel:_x("Attribute","campaign details panel - product recommendation - dummy product attribute label","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),variations:_x("Option 1","campaign details panel - product recommendation - dummy product variations","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")};0===g?m.product=y:m["product"+g]=y}m.cart={product:{name:_x("Product","campaign details panel - dummy cart product","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),price:omDashboardParams.currencySymbol+"50",image:omDashboardParams.defaultOfferedProductImage||""}}}else m.product=Object.assign({optionLabel:_x("Attribute","campaign details panel - dummy product attribute label","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),variations:_x("Option 1","campaign details panel - dummy product variations","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")},m.product);return decodeURIComponent(u(m))}catch(e){OMErrorHandler.log("In OfferPreview message html:: ",e)}}},{key:"resize",value:function(e,t){try{"desktop"==e?(document.getElementById(t).classList.remove("w-6/12"),document.getElementById(t).classList.add("w-full")):"mobile"==e&&(document.getElementById(t).classList.remove("w-full"),document.getElementById(t).classList.add("w-6/12"))}catch(e){OMErrorHandler.log("In OfferPreview resize:: ",e)}}},{key:"view",value:function(){var e=this;try{this.initialize();var t=this.kpi.totalRevenue||0,a="";return m("div",{class:"w-3/4"},m("h4",{class:"text-sm font-medium text-gray-700 uppercase"},_x("Messages","campaign details panel - campaign messages - heading","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),this.currentCampaign.messages.map((function(r,i){return n.a.currentDeletedMessageIds.has(r.id)?"":(a="#".concat(r.id," ").concat(OMFunctions.formatCamelCaseString(r.type)),m("section",{class:"mt-4 mb-8 overflow-hidden border-t border-b border-gray-200 sm:border sm:rounded-lg"},m("div",{class:"flex items-center justify-between px-4 py-2 bg-white border-b border-gray-200 sm:items-center"},m("span",{class:"px-2 rounded-md text-sm font-medium leading-6 bg-gray-100 text-gray-800"},a),r.kpi?m("div",{class:"flex items-center ml-2 text-sm leading-none text-gray-400"},m("span",{class:"ml-3 font-bold text-gray-500"},r.kpi.views||0),m("span",{class:"ml-1"}," "+sprintf(_x("View%s","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),r.kpi.views>1?_x("s","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):"")),m("span",{class:"ml-3 font-bold text-gray-500"},r.kpi.orderCount||0),m("span",{class:"ml-1"}," "+sprintf(_x("Order%s","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),r.kpi.orderCount>1?_x("s","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):"")),m("span",{class:"ml-3 font-bold text-gray-500"},r.kpi.orderItemCount||0),m("span",{class:"ml-1"}," "+sprintf(_x("Item%s Sold","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),r.kpi.orderItemCount>1?_x("s","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"):"")),m("span",{class:"ml-3 font-bold text-indigo-500"},omDashboardParams.currencySymbol,OMFunctions.getNumber(r.kpi.earnings),omDashboardParams.decimalSeparator,OMFunctions.getDecimal(r.kpi.earnings)),m("span",{class:"ml-1"},_x("Revenue","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("span",{class:"ml-3 font-bold text-indigo-500"},t>0&&r.kpi.earnings?Math.round(r.kpi.earnings/t*100):0,"%"),m("span",{class:"ml-1"}," "+_x("Conversion","campaign details panel - campaign messages - kpi","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))):null,m("div",{class:"flex items-center flex-shrink-0 ml-4"},m("button",{type:"button",onclick:function(){e.resize("desktop",e.currentCampaign.id+"_"+i)},class:"inline-block px-1 py-2 font-medium leading-none text-gray-400 rounded-lg focus:outline-none hover:text-gray-600 focus:text-gray-600"},m("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},m("path",{fill:"currentColor",d:"M19,2H5A3,3,0,0,0,2,5V15a3,3,0,0,0,3,3H7.64l-.58,1a2,2,0,0,0,0,2,2,2,0,0,0,1.75,1h6.46A2,2,0,0,0,17,21a2,2,0,0,0,0-2l-.59-1H19a3,3,0,0,0,3-3V5A3,3,0,0,0,19,2ZM8.77,20,10,18H14l1.2,2ZM20,15a1,1,0,0,1-1,1H5a1,1,0,0,1-1-1V14H20Zm0-3H4V5A1,1,0,0,1,5,4H19a1,1,0,0,1,1,1Z"}))),m("button",{type:"button",onclick:function(){e.resize("mobile",e.currentCampaign.id+"_"+i)},class:"inline-block px-1 py-2 font-medium leading-none text-gray-400 rounded-lg focus:outline-none hover:text-gray-600 focus:text-gray-600"},m("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},m("path",{fill:"currentColor",d:"M16,2H8A3,3,0,0,0,5,5V19a3,3,0,0,0,3,3h8a3,3,0,0,0,3-3V5A3,3,0,0,0,16,2Zm1,17a1,1,0,0,1-1,1H8a1,1,0,0,1-1-1V18H17Zm0-3H7V5A1,1,0,0,1,8,4h8a1,1,0,0,1,1,1Z"}))),m("button",{type:"button",onclick:function(){e.currentMessageId=e.currentCampaign.id+"_"+i,e.showModal()},class:"flex items-center justify-center pr-1 pl-3 py-2 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out hover:text-red-600 focus:outline-none"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-4 h-4"},m("path",{d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"}))),e.currentCampaign.messages.filter((function(e){return!n.a.currentDeletedMessageIds.has(e.id)})).length>1?m("button",{type:"button",onclick:function(e){n.a.deleteMessageIndex(i)},class:"flex items-center justify-center pr-1 pl-1 py-2 text-xs leading-5 text-gray-400 transition duration-150 ease-in-out hover:text-red-600 focus:outline-none"},m("svg",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",viewBox:"0 0 24 24",class:"w-4 h-4 mr-1"},m("path",{d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"}))):"")),m("div",{class:"relative bg-gray-500"},m("div",{id:"".concat(e.currentCampaign.id,"_").concat(i,"_content"),class:"hidden","data-title":a},OMFunctions.decodeHtmlString(r.template)),m("div",{class:"relative ifport max-w-full",id:e.currentCampaign.id+"_"+i},m("iframe",{class:"w-full bg-white om-message-preview",src:"data:text/html;charset=utf-8,"+encodeURIComponent(e.prepareMessageHTML(r.template,n.a.messageCompiledContent[e.currentCampaign.id][r.id],r.type)),style:"overflow: auto; height: 480px;"})))))})))}catch(e){OMErrorHandler.log("In OfferPreview view:: ",e)}}}])&&J(t.prototype,a),r&&J(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function $(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var X=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,a,n;return t=e,(a=[{key:"view",value:function(e){try{return m("div",{class:"w-full mt-24 flex flex-col justify-center text-center items-center space-y-4"},m("div",{class:"text-lg text-gray-600"},e.attrs.msg||""),m("div",{class:"text-indigo-600"},m("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-16 h-16",stroke:"currentColor",fill:"none",viewBox:"0 0 57 57"},m("g",{transform:"translate(1 1)","stroke-width":"2",fill:"none","fill-rule":"evenodd"},m("circle",{cx:"5",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;5;50;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",values:"5;27;49;5",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"27",cy:"5",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",from:"5",to:"5",values:"5;50;50;5",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",begin:"0s",dur:"2.2s",from:"27",to:"27",values:"27;49;5;27",calcMode:"linear",repeatCount:"indefinite"})),m("circle",{cx:"49",cy:"50",r:"5"},m("animate",{attributeName:"cy",begin:"0s",dur:"2.2s",values:"50;50;5;50",calcMode:"linear",repeatCount:"indefinite"}),m("animate",{attributeName:"cx",from:"49",to:"49",begin:"0s",dur:"2.2s",values:"49;5;27;49",calcMode:"linear",repeatCount:"indefinite"}))))))}catch(e){OMErrorHandler.log("In Loader view:: ",e)}}}])&&$(t.prototype,a),n&&$(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ee(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var te=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{this.currentCampaign=n.a.currentCampaign||{},this.kpi=this.currentCampaign.kpi||"",Object.keys(this.currentCampaign).length>0&&0==n.a.generatedCampaigns.length&&(n.a.acceptedCampaignsIds=new Set,n.a.fetchDetails())}catch(e){OMErrorHandler.log("In CampaignDetail initialize:: ",e)}}},{key:"display",value:function(e){try{return e?m("div",{class:"mt-64 text-center"},m(X,{msg:_x("Generating Campaigns...","campaign details panel - generating campaigns - loading message","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")})):m("[",null,m(C,null),this.kpi?m(P,null):null,m("div",{class:"flex items-start p-8 text-gray-600"},m("[",null,m(R,{key:n.a.currentCampaign.id||0}))," ",m(B,null)),m("div",{class:"flex items-start p-8 pt-0 text-gray-500"},m(U,null),m(Z,null)))}catch(e){OMErrorHandler.log("In CampaignDetail display:: ",e)}}},{key:"view",value:function(){try{return m("aside",{"x-show":"sidebar",class:"fixed inset-0 overflow-hidden",style:"z-index: 120000"},m("div",{class:"absolute inset-0 overflow-hidden"},m("div",{class:"absolute inset-0 bg-gray-500 transition-opacity opacity-75"}),m("section",{id:"om-campaign-details-panel",class:"absolute inset-y-0 right-0 pl-20 max-w-full flex"},m("div",{class:"w-screen max-w-6xl"},m("div",{class:"h-full flex flex-col bg-gray-50 shadow-xl overflow-y-scroll"},this.display(n.a.flags.generatingCampaigns))))))}catch(e){OMErrorHandler.log("In CampaignDetail view:: ",e)}}}])&&ee(t.prototype,a),r&&ee(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ae=a(3);function ne(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{this.modal=Object.assign({title:"",content:"",autoHide:!1,hideDelay:-1,width:"w-1/4",cta:{title:_x("Ok","button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),callback:this.close},closeCTA:{title:_x("Cancel","button","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"),callback:this.close}},n.a.modal||{}),this.showModal=Object.keys(n.a.modal||{}).length>0&&""!==this.modal.title&&""!==this.modal.content,this.showCloseCTA=Object.keys(n.a.modal||{}).length>0&&Object.keys(n.a.modal.closeCTA||{}).length>0,this.showCloseIcon=!(Object.keys(n.a.modal||{}).length>0&&n.a.modal.hasOwnProperty("showCloseIcon"))||n.a.modal.showCloseIcon}catch(e){OMErrorHandler.log("In Modal initialize:: ",e)}}},{key:"close",value:function(){try{setTimeout(n.a.modal={},2e3)}catch(e){OMErrorHandler.log("In Modal close:: ",e)}}},{key:"oncreate",value:function(){try{this.modal.hasOwnProperty("onCreate")&&"function"==typeof this.modal.onCreate&&(this.modal.hasOwnProperty("onCreateParams")?this.modal.onCreate(this.modal.onCreateParams):this.modal.onCreate())}catch(e){OMErrorHandler.log("In Modal oncreate:: ",e)}}},{key:"onupdate",value:function(){try{this.modal.hasOwnProperty("onUpdate")&&"function"==typeof this.modal.onUpdate&&(this.modal.hasOwnProperty("onUpdateParams")?this.modal.onUpdate(this.modal.onUpdateParams):this.modal.onUpdate())}catch(e){OMErrorHandler.log("In Modal onupdate:: ",e)}}},{key:"view",value:function(){var e=this;try{return this.initialize(),this.modal.hideDelay>0&&setTimeout((function(){if(e.showModal&&e.modal.autoHide){var t=document.getElementsByClassName("sm-modal-close");t.length>0&&t[0].click()}}),this.modal.hideDelay),this.showModal?m("div",{class:"modal fade fixed top-0 left-0 w-full h-full outline-none overflow-x-hidden overflow-y-auto bg-gray-300 bg-opacity-50",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabindex:"-1","aria-labelledby":"staticBackdropLabel","aria-modal":"true",role:"dialog"},m("div",{class:"modal-dialog modal-dialog-centered relative pointer-events-none mx-auto ".concat(this.modal.width||"")},m("div",{class:"modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current"},m("div",{class:"modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md"},m("h5",{class:"text-xl font-medium leading-normal text-gray-800",id:"exampleModalLabel"},m.trust(this.modal.title||"")),this.showCloseIcon?m("button",{type:"button",class:"sm-modal-close btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline","data-bs-dismiss":"modal","aria-label":"Close",onclick:this.close},m("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","stroke-width":"2"},m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18L18 6M6 6l12 12"}))):""),m("div",{class:"modal-body relative p-4"},m.trust(this.modal.content||"")),m("div",{class:"modal-footer flex flex-shrink-0 flex-wrap items-center justify-end p-4 border-t border-gray-200 rounded-b-md"},this.modal.cta.title?m("button",{type:"button",class:"inline-block px-6 py-2.5 bg-indigo-600 text-white font-medium text-sm leading-5 rounded shadow-md hover:bg-indigo-500 hover:shadow-lg focus:shadow-lg focus:outline-none focus:shadow-outline-indigo focus:ring-0 transition duration-150 ease-in-out ml-1",onclick:function(){e.modal.cta.hasOwnProperty("params")?e.modal.cta.callback(e.modal.cta.params):e.modal.cta.callback(),(!e.modal.cta.hasOwnProperty("closeModalOnClick")||e.modal.cta.closeModalOnClick)&&e.close()}},this.modal.cta.title):"",this.showCloseCTA&&this.modal.closeCTA.title?m("button",{type:"button",class:"inline-block px-6 py-2.5 text-sm font-medium leading-5 text-gray-500 transition duration-150 ease-in-out bg-gray-200 border border-transparent rounded-md hover:bg-gray-300 focus:outline-none ml-1","data-bs-dismiss":"modal",onclick:function(){e.modal.closeCTA.hasOwnProperty("params")?e.modal.closeCTA.callback(e.modal.closeCTA.params):e.modal.closeCTA.callback(),(!e.modal.closeCTA.hasOwnProperty("closeModalOnClick")||e.modal.closeCTA.closeModalOnClick)&&e.close()}},this.modal.closeCTA.title):"")))):""}catch(e){OMErrorHandler.log("In Modal view:: ",e)}}}])&&ne(t.prototype,a),r&&ne(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialize(),i.a.fetch()}var t,a,r;return t=e,(a=[{key:"initialize",value:function(){try{if(this.data=i.a.data||{},this.kpi=this.data.kpi||[],this.filteredCampaigns=this.data.filteredCampaigns||[],this.campaignFlags=n.a.flags||{},0==Object.keys(this.data).length)throw _x("Dashboard data blank","dashboard - warning message","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")}catch(e){OMErrorHandler.log("In Dashboard initialize:: ",e)}}},{key:"view",value:function(){try{return this.initialize(),m("div",null,m(d,null),Object.keys(this.kpi).length>0&&(this.filteredCampaigns.length>0||0==this.filteredCampaigns.length&&"all"!=this.campaignFlags.currentStatusFilter)?m("[",null,m(f,null),omDashboardParams.isValid?"":m("div",{class:"bg-white border-red-500 border-l-4 m-4 p-3"},m("p",{class:"text-base"},m("span",{class:"font-bold"},_x("Important:","dashboard - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))," ",_x("Upgrade to latest version of Offermative to continue working.","dashboard - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m(v,null)):m("[",null,omDashboardParams.isValid?"":m("div",{class:"bg-white border-red-500 border-l-4 m-4 p-3"},m("p",{class:"text-base"},m("span",{class:"font-bold"},_x("Important:","dashboard - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))," ",_x("Upgrade to latest version of Offermative to continue working.","dashboard - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce"))),m("header",{class:"bg-white shadow"},m("div",{class:"max-w-7xl mx-auto py-40 sm:px-3 xl:px-8 text-center text-gray-500"},m("p",{class:"text-xl font-medium leading-8"},_x("No campaigns yet.","dashboard - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")),m("div",{class:"text-lg mx-auto leading-8 max-w-md mt-6 space-y-4"},m("p",null,_x('Go ahead, click that "Generate Campaigns" button in the top bar to create your first campaign.',"dashboard - description","offermative-discount-pricing-related-products-upsell-funnels-for-woocommerce")))))),this.campaignFlags.generatingCampaigns||Object.keys(n.a.currentCampaign).length>0?m(te,null):"",this.campaignFlags.showNotification?m(ae.a,null):null,m(re,null))}catch(e){OMErrorHandler.log("IN Dashboad view:: ",e)}}}])&&ie(t.prototype,a),r&&ie(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},function(e,t,a){"use strict";a.r(t),function(e){a(7);var t=a(4),n=a(2);e.__=wp.i18n.__,e._x=wp.i18n._x,e.sprintf=wp.i18n.sprintf;var r=document.getElementById("om-admin-dashboard");m.route(r,omDashboardParams.defaultRoute||"/dashboard",{"/dashboard":{view:function(e){try{var a=omDashboardParams.isSettingsEmpty||"1";return omDashboardParams.accessToken&&"1"!=a||m.route.set("/settings"),[m(t.a,e.attrs)]}catch(e){OMErrorHandler.log("In dashboard route:: ",e)}}},"/settings":{view:function(e){try{return omDashboardParams.accessToken||(e.attrs.isSettingsAccountTab=!0),[m(n.a,e.attrs)]}catch(e){OMErrorHandler.log("In settings route:: ",e)}}}})}.call(this,a(6))},function(e,t){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(e){"object"==typeof window&&(a=window)}e.exports=a}]);